<?xml version="1.0" ?><OrchExportInfo><Time>Sun Aug 13 12:43:38 UTC 2017</Time><User>John McDonough</User><Comments>Workflow posts a message to a Spark Room based on the Title(Name) of the Room.  The Workflow requires a Spark API token, a Spark Room Name, and a message for the Spark Room.  The workflow also supports a proxy if one if needed.</Comments><UnifiedFeatureAssetInfo><addiInfo></addiInfo><featureAssetEntry><data>{"checksum":"eeab818954a42f7dd1c424a9cc9df6e7a066c0c8","data":"eyJ3b3JrZmxvd0RlZmluaXRvbnNNYXAiOnsiU3BhcmtfTWVzc2FnZV9Qb3N0Ijoie1wid29ya2Zsb3dOYW1lXCI6XCJTcGFya19NZXNzYWdlX1Bvc3RcIixcImNvbXBvdW5kV0ZEZWZNYXBcIjp7fSxcImN1c3RvbUFjdGlvbkRlZmluaXRpb25cIjpcIntcXFwiaWRcXFwiOjE5MyxcXFwibmFtZVxcXCI6XFxcIlNwYXJrX01lc3NhZ2VfUG9zdFxcXCIsXFxcInZlcnNpb25cXFwiOjAsXFxcImRlc2NyaXB0aW9uXFxcIjpcXFwiXFxcIixcXFwiaXNBY3RpdmVcXFwiOnRydWUsXFxcImNvbnRleHRUeXBlXFxcIjowLFxcXCJpc1NhdmVBc1Rhc2tsZXRcXFwiOmZhbHNlLFxcXCJwdWJsaXNoQ29tcG91bmRUYXNrT3V0cHV0c1xcXCI6ZmFsc2UsXFxcInN0YXJ0dXBXb3JrZmxvd1xcXCI6ZmFsc2UsXFxcImlzTmV3Rm9sZGVyXFxcIjpmYWxzZSxcXFwibmV3Rm9sZGVyTmFtZVxcXCI6bnVsbCxcXFwiZXhpc3RpbmdGb2xkZXJOYW1lXFxcIjpudWxsLFxcXCJub09mSW5wdXRGaWVsZHNcXFwiOjAsXFxcImlzTG9ja2VkXFxcIjpmYWxzZSxcXFwiaXNIaWRkZW5cXFwiOmZhbHNlLFxcXCJmb2xkZXJOYW1lXFxcIjpcXFwiSnVzdGljZSBUZWFtXFxcIixcXFwiYWN0aXZpdHlOYW1lXFxcIjpudWxsLFxcXCJpc0FjdGl2aXR5XFxcIjpmYWxzZSxcXFwiaXNTZW5kRW1haWxOb3RpZmljYXRpb25cXFwiOmZhbHNlLFxcXCJlbWFpbElkTGlzdFxcXCI6XFxcIlxcXCIsXFxcImVtYWlsUG9saWN5XFxcIjpcXFwiTm8gZS1tYWlsXFxcIixcXFwiZW1haWxJZExpc3RUb05vdGlmeVxcXCI6XFxcIlxcXCIsXFxcImxhc3RWYWxpZGF0ZWRUaW1lXFxcIjoxNTAyNjI3ODM4NTk5LFxcXCJsYXN0VmFsaWRhdGVkU3RhdHVzXFxcIjpcXFwiT0tcXFwiLFxcXCJpc0FjdGl2ZVZlcnNpb25cXFwiOnRydWUsXFxcImNyZWF0ZWREYXRlVGltZVxcXCI6MCxcXFwidmVyc2lvbkRlc2NyaXB0aW9uXFxcIjpudWxsLFxcXCJ1c2VyQXNzaWduZWRWZXJzaW9uVGFnXFxcIjpcXFwiMFxcXCIsXFxcImxhc3RNb2RpZmllZERhdGVUaW1lXFxcIjoxNTAyNjI3Nzg3OTI2fVwiLFwid29ya2Zsb3dJbnB1dEZpZWxkRGVmaW5pdGlvbnNcIjpbXCJ7XFxcImZpZWxkRGVmSWRcXFwiOjIyOTgsXFxcImFjdGlvbklkXFxcIjoxOTMsXFxcIm5hbWVcXFwiOlxcXCJpbnB1dF8wX1NwYXJrX0FQSV9Ub2tlbjIzNVxcXCIsXFxcInVzZXJJbnB1dERpc3BsYXlPcmRlclxcXCI6MSxcXFwibGFiZWxcXFwiOlxcXCJTcGFyayBBUEkgVG9rZW5cXFwiLFxcXCJkZXNjcmlwdGlvblxcXCI6XFxcIlxcXCIsXFxcImlzT3B0aW9uYWxcXFwiOmZhbHNlLFxcXCJkaXNwbGF5TWFuZGF0b3J5XFxcIjpcXFwiWWVzXFxcIixcXFwidHlwZVxcXCI6XFxcImdlbl90ZXh0X2lucHV0XFxcIixcXFwiYmFzZVR5cGVcXFwiOm51bGwsXFxcInR5cGVEaXNwbGF5XFxcIjpcXFwiZ2VuX3RleHRfaW5wdXRcXFwiLFxcXCJpc011bHRpbGluZVxcXCI6ZmFsc2UsXFxcInNpemVcXFwiOlxcXCJtZWRpdW1cXFwiLFxcXCJpc0NvbnRleHRWYXJpYWJsZVxcXCI6ZmFsc2UsXFxcImlzQWRtaW5JbnB1dFxcXCI6ZmFsc2UsXFxcImlzRHluYW1pY0ZpbHRlcmVkSW5wdXRcXFwiOmZhbHNlLFxcXCJpc011bHRpc2VsZWN0SW5wdXRcXFwiOmZhbHNlLFxcXCJmaWx0ZXJDcml0ZXJpYVxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZUZvcm1WYWx1ZVxcXCI6bnVsbCxcXFwiYWRtaW5JbnB1dFZhbHVlTE9WXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlVGFidWxhckZpZWxkXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlVGFidWxhclBvcHVwRmllbGRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVUYWJ1bGFyV2l0aG91dENoZWNrYm94RmllbGRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVNdWx0aVNlbGVjdFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVBhc3N3b3JkXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlRGF0ZVxcXCI6MCxcXFwiYWRtaW5JbnB1dFZhbHVlRGF0ZXRpbWVcXFwiOjAsXFxcImFkbWluSW5wdXRWYWx1ZU51bWJlclxcXCI6MCxcXFwiYWRtaW5JbnB1dFZhbHVlQm9vbGVhblxcXCI6ZmFsc2UsXFxcImZvcm1NYW5hZ2VkQWRtaW5JbnB1dFZhbHVlXFxcIjpudWxsLFxcXCJhZG1pbklucHV0VmFsdWVMYXJnZUZpbGVVcGxvYWRcXFwiOlxcXCJcXFwiLFxcXCJ2YWx1ZXNEaXNwbGF5XFxcIjpudWxsLFxcXCJpc1ZhbHVlT3ZlcnJpZGRlblxcXCI6ZmFsc2UsXFxcImRpc3BsYXlPdmVycmlkZVxcXCI6XFxcIk5vXFxcIixcXFwibXVsdGlTZWxlY3RMaXN0RW50cnlJZFxcXCI6LTEsXFxcImVuY3J5cHRlZEFkbWluSW5wdXRWYWx1ZVxcXCI6XFxcIiR4JDQ5Y2EzNTI2Y2I4YzY1NzAxNWE3NTlhMDZiOTMwM2E4XFxcIixcXFwib3JpZ2luYWxBZG1pbklucHV0VmFsdWVcXFwiOlxcXCJcXFwiLFxcXCJpc01hcmtlZEZvckRlbGV0aW9uXFxcIjpmYWxzZSxcXFwiZWRpdEZvcm1JbnZva2VkXFxcIjpmYWxzZSxcXFwiaXNVc2VkSW5Mb29wVGFza1xcXCI6ZmFsc2V9XCIsXCJ7XFxcImZpZWxkRGVmSWRcXFwiOjIyOTksXFxcImFjdGlvbklkXFxcIjoxOTMsXFxcIm5hbWVcXFwiOlxcXCJpbnB1dF8xX1NwYXJrX1Jvb20zODZcXFwiLFxcXCJ1c2VySW5wdXREaXNwbGF5T3JkZXJcXFwiOjIsXFxcImxhYmVsXFxcIjpcXFwiU3BhcmsgUm9vbVxcXCIsXFxcImRlc2NyaXB0aW9uXFxcIjpcXFwiXFxcIixcXFwiaXNPcHRpb25hbFxcXCI6ZmFsc2UsXFxcImRpc3BsYXlNYW5kYXRvcnlcXFwiOlxcXCJZZXNcXFwiLFxcXCJ0eXBlXFxcIjpcXFwiZ2VuX3RleHRfaW5wdXRcXFwiLFxcXCJiYXNlVHlwZVxcXCI6bnVsbCxcXFwidHlwZURpc3BsYXlcXFwiOlxcXCJnZW5fdGV4dF9pbnB1dFxcXCIsXFxcImlzTXVsdGlsaW5lXFxcIjpmYWxzZSxcXFwic2l6ZVxcXCI6XFxcIm1lZGl1bVxcXCIsXFxcImlzQ29udGV4dFZhcmlhYmxlXFxcIjpmYWxzZSxcXFwiaXNBZG1pbklucHV0XFxcIjpmYWxzZSxcXFwiaXNEeW5hbWljRmlsdGVyZWRJbnB1dFxcXCI6ZmFsc2UsXFxcImlzTXVsdGlzZWxlY3RJbnB1dFxcXCI6ZmFsc2UsXFxcImZpbHRlckNyaXRlcmlhXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlRm9ybVZhbHVlXFxcIjpudWxsLFxcXCJhZG1pbklucHV0VmFsdWVMT1ZcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVUYWJ1bGFyRmllbGRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVUYWJ1bGFyUG9wdXBGaWVsZFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVRhYnVsYXJXaXRob3V0Q2hlY2tib3hGaWVsZFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZU11bHRpU2VsZWN0XFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlUGFzc3dvcmRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVEYXRlXFxcIjowLFxcXCJhZG1pbklucHV0VmFsdWVEYXRldGltZVxcXCI6MCxcXFwiYWRtaW5JbnB1dFZhbHVlTnVtYmVyXFxcIjowLFxcXCJhZG1pbklucHV0VmFsdWVCb29sZWFuXFxcIjpmYWxzZSxcXFwiZm9ybU1hbmFnZWRBZG1pbklucHV0VmFsdWVcXFwiOm51bGwsXFxcImFkbWluSW5wdXRWYWx1ZUxhcmdlRmlsZVVwbG9hZFxcXCI6XFxcIlxcXCIsXFxcInZhbHVlc0Rpc3BsYXlcXFwiOm51bGwsXFxcImlzVmFsdWVPdmVycmlkZGVuXFxcIjpmYWxzZSxcXFwiZGlzcGxheU92ZXJyaWRlXFxcIjpcXFwiTm9cXFwiLFxcXCJtdWx0aVNlbGVjdExpc3RFbnRyeUlkXFxcIjotMSxcXFwiZW5jcnlwdGVkQWRtaW5JbnB1dFZhbHVlXFxcIjpcXFwiJHgkOGU5NjA4Y2Y0NmY5YzczNTRiMzdjMjVhMWFkYzkzMmZcXFwiLFxcXCJvcmlnaW5hbEFkbWluSW5wdXRWYWx1ZVxcXCI6XFxcIlxcXCIsXFxcImlzTWFya2VkRm9yRGVsZXRpb25cXFwiOmZhbHNlLFxcXCJlZGl0Rm9ybUludm9rZWRcXFwiOmZhbHNlLFxcXCJpc1VzZWRJbkxvb3BUYXNrXFxcIjpmYWxzZX1cIixcIntcXFwiZmllbGREZWZJZFxcXCI6MjMwMCxcXFwiYWN0aW9uSWRcXFwiOjE5MyxcXFwibmFtZVxcXCI6XFxcImlucHV0XzJfU3BhcmtfTWVzc2FnZTI4M1xcXCIsXFxcInVzZXJJbnB1dERpc3BsYXlPcmRlclxcXCI6MyxcXFwibGFiZWxcXFwiOlxcXCJTcGFyayBNZXNzYWdlXFxcIixcXFwiZGVzY3JpcHRpb25cXFwiOlxcXCJcXFwiLFxcXCJpc09wdGlvbmFsXFxcIjpmYWxzZSxcXFwiZGlzcGxheU1hbmRhdG9yeVxcXCI6XFxcIlllc1xcXCIsXFxcInR5cGVcXFwiOlxcXCJnZW5fdGV4dF9pbnB1dFxcXCIsXFxcImJhc2VUeXBlXFxcIjpudWxsLFxcXCJ0eXBlRGlzcGxheVxcXCI6XFxcImdlbl90ZXh0X2lucHV0XFxcIixcXFwiaXNNdWx0aWxpbmVcXFwiOmZhbHNlLFxcXCJzaXplXFxcIjpcXFwibWVkaXVtXFxcIixcXFwiaXNDb250ZXh0VmFyaWFibGVcXFwiOmZhbHNlLFxcXCJpc0FkbWluSW5wdXRcXFwiOmZhbHNlLFxcXCJpc0R5bmFtaWNGaWx0ZXJlZElucHV0XFxcIjpmYWxzZSxcXFwiaXNNdWx0aXNlbGVjdElucHV0XFxcIjpmYWxzZSxcXFwiZmlsdGVyQ3JpdGVyaWFcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVGb3JtVmFsdWVcXFwiOm51bGwsXFxcImFkbWluSW5wdXRWYWx1ZUxPVlxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVRhYnVsYXJGaWVsZFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVRhYnVsYXJQb3B1cEZpZWxkXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlVGFidWxhcldpdGhvdXRDaGVja2JveEZpZWxkXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlTXVsdGlTZWxlY3RcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVQYXNzd29yZFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZURhdGVcXFwiOjAsXFxcImFkbWluSW5wdXRWYWx1ZURhdGV0aW1lXFxcIjowLFxcXCJhZG1pbklucHV0VmFsdWVOdW1iZXJcXFwiOjAsXFxcImFkbWluSW5wdXRWYWx1ZUJvb2xlYW5cXFwiOmZhbHNlLFxcXCJmb3JtTWFuYWdlZEFkbWluSW5wdXRWYWx1ZVxcXCI6bnVsbCxcXFwiYWRtaW5JbnB1dFZhbHVlTGFyZ2VGaWxlVXBsb2FkXFxcIjpcXFwiXFxcIixcXFwidmFsdWVzRGlzcGxheVxcXCI6bnVsbCxcXFwiaXNWYWx1ZU92ZXJyaWRkZW5cXFwiOmZhbHNlLFxcXCJkaXNwbGF5T3ZlcnJpZGVcXFwiOlxcXCJOb1xcXCIsXFxcIm11bHRpU2VsZWN0TGlzdEVudHJ5SWRcXFwiOi0xLFxcXCJlbmNyeXB0ZWRBZG1pbklucHV0VmFsdWVcXFwiOlxcXCIkeCRmYTA2MDk5ZjczMWE2MmMxZDlhZTc0YzhlYzgzMzAzNlxcXCIsXFxcIm9yaWdpbmFsQWRtaW5JbnB1dFZhbHVlXFxcIjpcXFwiXFxcIixcXFwiaXNNYXJrZWRGb3JEZWxldGlvblxcXCI6ZmFsc2UsXFxcImVkaXRGb3JtSW52b2tlZFxcXCI6ZmFsc2UsXFxcImlzVXNlZEluTG9vcFRhc2tcXFwiOmZhbHNlfVwiLFwie1xcXCJmaWVsZERlZklkXFxcIjoyMzAxLFxcXCJhY3Rpb25JZFxcXCI6MTkzLFxcXCJuYW1lXFxcIjpcXFwiaW5wdXRfM19Qcm94eV9Ib3N0OTUxXFxcIixcXFwidXNlcklucHV0RGlzcGxheU9yZGVyXFxcIjo0LFxcXCJsYWJlbFxcXCI6XFxcIlByb3h5IEhvc3RcXFwiLFxcXCJkZXNjcmlwdGlvblxcXCI6XFxcIlxcXCIsXFxcImlzT3B0aW9uYWxcXFwiOnRydWUsXFxcImRpc3BsYXlNYW5kYXRvcnlcXFwiOlxcXCJZZXNcXFwiLFxcXCJ0eXBlXFxcIjpcXFwiZ2VuX3RleHRfaW5wdXRcXFwiLFxcXCJiYXNlVHlwZVxcXCI6bnVsbCxcXFwidHlwZURpc3BsYXlcXFwiOlxcXCJnZW5fdGV4dF9pbnB1dFxcXCIsXFxcImlzTXVsdGlsaW5lXFxcIjpmYWxzZSxcXFwic2l6ZVxcXCI6XFxcIm1lZGl1bVxcXCIsXFxcImlzQ29udGV4dFZhcmlhYmxlXFxcIjpmYWxzZSxcXFwiaXNBZG1pbklucHV0XFxcIjpmYWxzZSxcXFwiaXNEeW5hbWljRmlsdGVyZWRJbnB1dFxcXCI6ZmFsc2UsXFxcImlzTXVsdGlzZWxlY3RJbnB1dFxcXCI6ZmFsc2UsXFxcImZpbHRlckNyaXRlcmlhXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlRm9ybVZhbHVlXFxcIjpudWxsLFxcXCJhZG1pbklucHV0VmFsdWVMT1ZcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVUYWJ1bGFyRmllbGRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVUYWJ1bGFyUG9wdXBGaWVsZFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVRhYnVsYXJXaXRob3V0Q2hlY2tib3hGaWVsZFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZU11bHRpU2VsZWN0XFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlUGFzc3dvcmRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVEYXRlXFxcIjowLFxcXCJhZG1pbklucHV0VmFsdWVEYXRldGltZVxcXCI6MCxcXFwiYWRtaW5JbnB1dFZhbHVlTnVtYmVyXFxcIjowLFxcXCJhZG1pbklucHV0VmFsdWVCb29sZWFuXFxcIjpmYWxzZSxcXFwiZm9ybU1hbmFnZWRBZG1pbklucHV0VmFsdWVcXFwiOm51bGwsXFxcImFkbWluSW5wdXRWYWx1ZUxhcmdlRmlsZVVwbG9hZFxcXCI6XFxcIlxcXCIsXFxcInZhbHVlc0Rpc3BsYXlcXFwiOm51bGwsXFxcImlzVmFsdWVPdmVycmlkZGVuXFxcIjpmYWxzZSxcXFwiZGlzcGxheU92ZXJyaWRlXFxcIjpcXFwiTm9cXFwiLFxcXCJtdWx0aVNlbGVjdExpc3RFbnRyeUlkXFxcIjotMSxcXFwiZW5jcnlwdGVkQWRtaW5JbnB1dFZhbHVlXFxcIjpcXFwiJHgkNjg3NjRkNmY5YmI2MDhlN2NmNTQ4MzE5YmFhMWQ2ZjJcXFwiLFxcXCJvcmlnaW5hbEFkbWluSW5wdXRWYWx1ZVxcXCI6XFxcIlxcXCIsXFxcImlzTWFya2VkRm9yRGVsZXRpb25cXFwiOmZhbHNlLFxcXCJlZGl0Rm9ybUludm9rZWRcXFwiOmZhbHNlLFxcXCJpc1VzZWRJbkxvb3BUYXNrXFxcIjpmYWxzZX1cIixcIntcXFwiZmllbGREZWZJZFxcXCI6MjMwMixcXFwiYWN0aW9uSWRcXFwiOjE5MyxcXFwibmFtZVxcXCI6XFxcImlucHV0XzRfUHJveHlfUG9ydDE3NlxcXCIsXFxcInVzZXJJbnB1dERpc3BsYXlPcmRlclxcXCI6NSxcXFwibGFiZWxcXFwiOlxcXCJQcm94eSBQb3J0XFxcIixcXFwiZGVzY3JpcHRpb25cXFwiOlxcXCJcXFwiLFxcXCJpc09wdGlvbmFsXFxcIjp0cnVlLFxcXCJkaXNwbGF5TWFuZGF0b3J5XFxcIjpcXFwiWWVzXFxcIixcXFwidHlwZVxcXCI6XFxcImdlbl90ZXh0X2lucHV0XFxcIixcXFwiYmFzZVR5cGVcXFwiOm51bGwsXFxcInR5cGVEaXNwbGF5XFxcIjpcXFwiZ2VuX3RleHRfaW5wdXRcXFwiLFxcXCJpc011bHRpbGluZVxcXCI6ZmFsc2UsXFxcInNpemVcXFwiOlxcXCJtZWRpdW1cXFwiLFxcXCJpc0NvbnRleHRWYXJpYWJsZVxcXCI6ZmFsc2UsXFxcImlzQWRtaW5JbnB1dFxcXCI6ZmFsc2UsXFxcImlzRHluYW1pY0ZpbHRlcmVkSW5wdXRcXFwiOmZhbHNlLFxcXCJpc011bHRpc2VsZWN0SW5wdXRcXFwiOmZhbHNlLFxcXCJmaWx0ZXJDcml0ZXJpYVxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZUZvcm1WYWx1ZVxcXCI6bnVsbCxcXFwiYWRtaW5JbnB1dFZhbHVlTE9WXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlVGFidWxhckZpZWxkXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlVGFidWxhclBvcHVwRmllbGRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVUYWJ1bGFyV2l0aG91dENoZWNrYm94RmllbGRcXFwiOlxcXCJcXFwiLFxcXCJhZG1pbklucHV0VmFsdWVNdWx0aVNlbGVjdFxcXCI6XFxcIlxcXCIsXFxcImFkbWluSW5wdXRWYWx1ZVBhc3N3b3JkXFxcIjpcXFwiXFxcIixcXFwiYWRtaW5JbnB1dFZhbHVlRGF0ZVxcXCI6MCxcXFwiYWRtaW5JbnB1dFZhbHVlRGF0ZXRpbWVcXFwiOjAsXFxcImFkbWluSW5wdXRWYWx1ZU51bWJlclxcXCI6MCxcXFwiYWRtaW5JbnB1dFZhbHVlQm9vbGVhblxcXCI6ZmFsc2UsXFxcImZvcm1NYW5hZ2VkQWRtaW5JbnB1dFZhbHVlXFxcIjpudWxsLFxcXCJhZG1pbklucHV0VmFsdWVMYXJnZUZpbGVVcGxvYWRcXFwiOlxcXCJcXFwiLFxcXCJ2YWx1ZXNEaXNwbGF5XFxcIjpudWxsLFxcXCJpc1ZhbHVlT3ZlcnJpZGRlblxcXCI6ZmFsc2UsXFxcImRpc3BsYXlPdmVycmlkZVxcXCI6XFxcIk5vXFxcIixcXFwibXVsdGlTZWxlY3RMaXN0RW50cnlJZFxcXCI6LTEsXFxcImVuY3J5cHRlZEFkbWluSW5wdXRWYWx1ZVxcXCI6XFxcIiR4JGE4OWVjMzVhNmI5YTZkY2NhZDI0YjI3MTMxNmMzNzY0XFxcIixcXFwib3JpZ2luYWxBZG1pbklucHV0VmFsdWVcXFwiOlxcXCJcXFwiLFxcXCJpc01hcmtlZEZvckRlbGV0aW9uXFxcIjpmYWxzZSxcXFwiZWRpdEZvcm1JbnZva2VkXFxcIjpmYWxzZSxcXFwiaXNVc2VkSW5Mb29wVGFza1xcXCI6ZmFsc2V9XCJdLFwiZmllbGRUb1VzZXJJbnB1dFNlbGVjdG9yQmluZGluZ01hcFwiOntcIjIyMTlcIjpbXCJ7XFxcImZpZWxkTmFtZVxcXCI6XFxcInByb3h5UG9ydFxcXCIsXFxcImlzQm91bmRUb0lucHV0XFxcIjp0cnVlLFxcXCJpbnB1dEZpZWxkSWRcXFwiOlxcXCJpbnB1dF80X1Byb3h5X1BvcnQxNzZcXFwiLFxcXCJpbnB1dEZpZWxkVmFsdWVcXFwiOlxcXCIwXFxcIixcXFwiY29uZmlnRW50cnlJZFxcXCI6MjIxOSxcXFwiYWN0aW9uSWRcXFwiOjE5MyxcXFwiZXhwb3J0VGFza1JlZmVyZW5jZVxcXCI6bnVsbH1cIixcIntcXFwiZmllbGROYW1lXFxcIjpcXFwiZmlsZVxcXCIsXFxcImlzQm91bmRUb0lucHV0XFxcIjpmYWxzZSxcXFwiaW5wdXRGaWVsZElkXFxcIjpudWxsLFxcXCJpbnB1dEZpZWxkVmFsdWVcXFwiOm51bGwsXFxcImNvbmZpZ0VudHJ5SWRcXFwiOjIyMTksXFxcImFjdGlvbklkXFxcIjoxOTMsXFxcImV4cG9ydFRhc2tSZWZlcmVuY2VcXFwiOm51bGx9XCIsXCJ7XFxcImZpZWxkTmFtZVxcXCI6XFxcIm1lc3NhZ2VJZFxcXCIsXFxcImlzQm91bmRUb0lucHV0XFxcIjpmYWxzZSxcXFwiaW5wdXRGaWVsZElkXFxcIjpudWxsLFxcXCJpbnB1dEZpZWxkVmFsdWVcXFwiOm51bGwsXFxcImNvbmZpZ0VudHJ5SWRcXFwiOjIyMTksXFxcImFjdGlvbklkXFxcIjoxOTMsXFxcImV4cG9ydFRhc2tSZWZlcmVuY2VcXFwiOm51bGx9XCIsXCJ7XFxcImZpZWxkTmFtZVxcXCI6XFxcIm1lc3NhZ2VcXFwiLFxcXCJpc0JvdW5kVG9JbnB1dFxcXCI6dHJ1ZSxcXFwiaW5wdXRGaWVsZElkXFxcIjpcXFwiaW5wdXRfMl9TcGFya19NZXNzYWdlMjgzXFxcIixcXFwiaW5wdXRGaWVsZFZhbHVlXFxcIjpcXFwiMFxcXCIsXFxcImNvbmZpZ0VudHJ5SWRcXFwiOjIyMTksXFxcImFjdGlvbklkXFxcIjoxOTMsXFxcImV4cG9ydFRhc2tSZWZlcmVuY2VcXFwiOm51bGx9XCIsXCJ7XFxcImZpZWxkTmFtZVxcXCI6XFxcInByb3h5SG9zdFxcXCIsXFxcImlzQm91bmRUb0lucHV0XFxcIjp0cnVlLFxcXCJpbnB1dEZpZWxkSWRcXFwiOlxcXCJpbnB1dF8zX1Byb3h5X0hvc3Q5NTFcXFwiLFxcXCJpbnB1dEZpZWxkVmFsdWVcXFwiOlxcXCIwXFxcIixcXFwiY29uZmlnRW50cnlJZFxcXCI6MjIxOSxcXFwiYWN0aW9uSWRcXFwiOjE5MyxcXFwiZXhwb3J0VGFza1JlZmVyZW5jZVxcXCI6bnVsbH1cIixcIntcXFwiZmllbGROYW1lXFxcIjpcXFwicm9vbUlkXFxcIixcXFwiaXNCb3VuZFRvSW5wdXRcXFwiOnRydWUsXFxcImlucHV0RmllbGRJZFxcXCI6XFxcImlucHV0XzFfU3BhcmtfUm9vbTM4NlxcXCIsXFxcImlucHV0RmllbGRWYWx1ZVxcXCI6XFxcIjBcXFwiLFxcXCJjb25maWdFbnRyeUlkXFxcIjoyMjE5LFxcXCJhY3Rpb25JZFxcXCI6MTkzLFxcXCJleHBvcnRUYXNrUmVmZXJlbmNlXFxcIjpudWxsfVwiLFwie1xcXCJmaWVsZE5hbWVcXFwiOlxcXCJ0b2tlblxcXCIsXFxcImlzQm91bmRUb0lucHV0XFxcIjp0cnVlLFxcXCJpbnB1dEZpZWxkSWRcXFwiOlxcXCJpbnB1dF8wX1NwYXJrX0FQSV9Ub2tlbjIzNVxcXCIsXFxcImlucHV0RmllbGRWYWx1ZVxcXCI6XFxcIjBcXFwiLFxcXCJjb25maWdFbnRyeUlkXFxcIjoyMjE5LFxcXCJhY3Rpb25JZFxcXCI6MTkzLFxcXCJleHBvcnRUYXNrUmVmZXJlbmNlXFxcIjpudWxsfVwiXX0sXCJjdXN0b21BY3Rpb25Db25maWdFbnRyaWVzXCI6W1wie1xcXCJ0YXNrTmFtZVxcXCI6XFxcImN1c3RvbV9TcGFya19tZXNzYWdlc19jcmVhdGVfMjIxNFxcXCIsXFxcImNvbmZpZ0VudHJ5SWRcXFwiOjIyMTksXFxcImFjdGlvbklkXFxcIjoxOTMsXFxcInZlcnNpb25JZFxcXCI6LTEsXFxcImN1c3RBY3Rpb25PcmRlclxcXCI6MjIxNCxcXFwiYWJvcnRJZkZhaWxlZFxcXCI6ZmFsc2UsXFxcImhhbmRsZXJUeXBlXFxcIjpcXFwiY3VzdG9tX1NwYXJrX21lc3NhZ2VzX2NyZWF0ZVxcXCIsXFxcImNvbW1lbnRcXFwiOlxcXCJcXFwiLFxcXCJzdWNjZXNzQWN0aW9uVHlwZVxcXCI6MSxcXFwic3VjY2Vzc1N0ZXBJZFxcXCI6LTEsXFxcImZhaWx1cmVBY3Rpb25UeXBlXFxcIjoyLFxcXCJmYWlsdXJlU3RlcElkXFxcIjotMSxcXFwiaXNTdGFydGluZ1Rhc2tcXFwiOnRydWUsXFxcImlzUmV0cnlPbkV4Y2VwdGlvblxcXCI6ZmFsc2UsXFxcInJldHJ5RnJlcXVlbmN5XFxcIjpudWxsLFxcXCJyZXRyeUNvdW50XFxcIjowLFxcXCJleHBvcnRSZWZlcmVuY2VcXFwiOm51bGwsXFxcImV4cG9ydFN1Y2Nlc3NSZWZlcmVuY2VcXFwiOlxcXCItMVxcXCIsXFxcImV4cG9ydEZhaWx1cmVSZWZlcmVuY2VcXFwiOlxcXCItMVxcXCIsXFxcInNlcnZpY2VSZXF1ZXN0QXNzZXRDaGFuZ2VFbnRyeUlkXFxcIjotMSxcXFwiZGlzYWJsZVJvbGxCYWNrXFxcIjpmYWxzZSxcXFwiZXh0ZW5kaW5nQ29uZmlnRW50cnlJZFxcXCI6MCxcXFwiaXNFeHRlbmRpbmdDb25maWdFbnRyeVByaW1hcnlcXFwiOmZhbHNlLFxcXCJjb25kaXRpb25Db25maWdFbnRyaWVzXFxcIjpudWxsLFxcXCJjb25kaXRpb25Db25maWdFbnRyaWVzQXNKc29uXFxcIjpudWxsLFxcXCJjb25maWdFbnRyeVRhc2tUeXBlXFxcIjotMX1cIl0sXCJhZGFwdGVyVGFza0VudHJpZXNcIjpudWxsLFwiY3VzdG9tQWN0aW9uQ29uZmlnTWFwXCI6e1wiMjIxOVwiOlwie1xcXCJhY3Rpb25JZFxcXCI6MTkzLFxcXCJjb25maWdFbnRyeUlkXFxcIjoyMjE5LFxcXCJ0b2tlblxcXCI6XFxcIlxcXCIsXFxcIm1lc3NhZ2VcXFwiOlxcXCJcXFwiLFxcXCJyb29tSWRcXFwiOlxcXCJcXFwiLFxcXCJmaWxlXFxcIjpcXFwiXFxcIixcXFwicHJveHlIb3N0XFxcIjpcXFwiXFxcIixcXFwicHJveHlQb3J0XFxcIjpcXFwiXFxcIixcXFwicm9sbGJhY2tcXFwiOjB9XCJ9LFwiY3VzdG9tYUFwcHJvdmFsVGFza0RlZk1hcFwiOm51bGwsXCJjdXN0b21hQXBwcm92YWxUYXNrSW5wdXREZWZNYXBcIjpudWxsLFwiaW5wdXRGaWVsZE11bHRpU2VsZWN0TGlzdE1hcHBpbmdcIjp7fSxcImN1c3RvbUlucHV0RGVmaW5pdGlvbnNcIjpudWxsLFwiY3VzdG9tSW5wdXRMb3ZEZWZNYXBcIjpudWxsLFwibWFwcGFibGVXb3JrZmxvd091dHB1dEZpZWxkRGVmaW5pdGlvbnNcIjpudWxsLFwiY29uZGl0aW9uc1wiOnt9fSJ9fQ=="}</data></featureAssetEntry><type>WORKFLOWS</type></UnifiedFeatureAssetInfo><UnifiedFeatureAssetInfo><addiInfo></addiInfo><featureAssetEntry><data><![CDATA[{"taskName":"Spark_messages_create","taskLabel":"Create message in Spark room","isActive":true,"taskSummary":"Post a message to a Spark room.\n","taskDescription":"Post a message to a room.\n\nPosts a plain text message, and optionally a media content attachment, to a room.","taskDetails":"\r\n<------- Task Information ------->\r\nTask contains 7 inputs\r\n   token (Label: \'token\', Type: text, MappableType: gen_text_input)\r\n   message (Label: \'Message\', Type: text, MappableType: gen_text_input)\r\n   roomId (Label: \'Spark Room Id\', Type: text, MappableType: gen_text_input)\r\n   file (Label: \'file\', Type: text, MappableType: gen_text_input)\r\n   proxyHost (Label: \'proxyHost\', Type: text, MappableType: gen_text_input)\r\n   proxyPort (Label: \'proxyPort\', Type: text, MappableType: gen_text_input)\r\n   rollback (Label: \'rollback\', Type: number, MappableType: )\r\n\r\nTask contains 1 outputs\r\n   messageId (Description: \'messageId\', Type: gen_text_input)\r\nisRepoUsed: falseRepo file: Repo: script: //=================================================================\n// Title:               Spark_messages_post\n// Description:         This will post a message to a specific spark group\n//\n// Author:              Rob Edwards (@clijockey/robedwa@cisco.com)\n// Date:                18/12/2015\n// Version:             1.3 (updated 27/01/2016)\n// Dependencies:\n// Limitations/issues:  Updated for UCSD 5.4 and tested on 5.4.0.1\n//=================================================================\n\nimportPackage(java.util);\nimportPackage(java.lang);\nimportPackage(java.io);\nimportPackage(com.cloupia.lib.util);\nimportPackage(org.apache.commons.httpclient);\nimportPackage(org.apache.commons.httpclient.cookie);\nimportPackage(org.apache.commons.httpclient.methods);\nimportPackage(org.apache.commons.httpclient.auth);\nimportPackage(org.apache.commons.httpclient.protocol);\nimportClass(org.apache.commons.httpclient.protocol.SecureProtocolSocketFactory);\nimportPackage(com.cloupia.lib.cIaaS.vcd.api);\n\n//----------------------------------------------------------------------------------------\n//\n//        Author: Russ Whitear (rwhitear@cisco.com)\n//\n// Function Name: httpRequest()\n//\n//       Version: 3.0\n//\n// Modifications: Added HTTP header Connection:close to execute method to overcome the\n//                CLOSE_WAIT issue caused with releaseConnection().\n//\n//                Modified SSL socket factory code to work with UCS Director 5.4.0.0.\n//\n//   Description: HTTP Request function - httpRequest.\n//\n//                I have made the httpClient functionality more object like in order to\n//                make cloupia scripts more readable when making many/multiple HTTP/HTTPS\n//                requests within a single script.\n//\n//      Usage: 1. var request = new httpRequest();                   // Create new object.\n//\n//             2. request.setup(\"192.168.10.10\",\"https\",\"admin\",\"cisco123\");      // SSL.\n//          or:   request.setup(\"192.168.10.10\",\"http\",\"admin\",\"cisco123\");       // HTTP.\n//          or:   request.setup(\"192.168.10.10\",\"https\");           // SSL, no basicAuth.\n//          or:   request.setup(\"192.168.10.10\",\"http\");            // HTTP, no basicAuth.\n//\n//             3. request.getRequest(\"/\");                    // HTTP GET (URI).\n//          or:   request.postRequest(\"/\",\"some body text\");  // HTTP POST (URI,BodyText).\n//          or:   request.deleteRequest(\"/\");                 // HTTP DELETE (URI).\n//\n//  (optional) 4. request.contentType(\"json\");            // Add Content-Type HTTP header.\n//          or:   request.contentType(\"xml\");\n//\n//  (optional) 5. request.addHeader(\"X-Cloupia-Request-Key\",\"1234567890\");  // Any Header.\n//\n//             6. var statusCode = request.execute();                     // Send request.\n//\n//             7. var response = request.getResponse(\"asString\");   // Response as string.\n//          or:   var response = request.getResponse(\"asStream\");   // Response as stream.\n//\n//             8. request.disconnect();                             // Release connection.\n//\n//\n//          Note: Be sure to add these lines to the top of your script:\n//\n//          importPackage(java.util);\n//          importPackage(com.cloupia.lib.util);\n//          importPackage(org.apache.commons.httpclient);\n//          importPackage(org.apache.commons.httpclient.cookie);\n//          importPackage(org.apache.commons.httpclient.methods);\n//          importPackage(org.apache.commons.httpclient.auth);\n//          importPackage(org.apache.commons.httpclient.protocol);\n//          importClass(org.apache.commons.httpclient.protocol.SecureProtocolSocketFactory);\n//          importPackage(com.cloupia.lib.cIaaS.vcd.api);\n//\n//----------------------------------------------------------------------------------------\n\nvar httpRequest = function () {};\n\nhttpRequest.prototype.setup = function(serverIp, transport, username, password) {\n    this.serverIp = serverIp;\n    this.transport = transport;\n    this.username = username;\n    this.password = password;\n\n    this.httpClient = new HttpClient();\n\n    // Decide whether to create an HTTP or HTTPS connection based up \'transport\'.\n    if( this.transport == \"https\" ) {\n\t\tthis.httpClient = CustomEasySSLSocketFactory.getIgnoreSSLClient(this.serverIp, 443);\n\n        // Set proxy configuration if proxy info has been passed to the task\n        if (proxyHost) {\n            logger.addInfo(\"Proxy configuration has been passed, adding - \"+proxyHost+\":\"+proxyPort);\n            this.httpClient.getHostConfiguration().setProxy(proxyHost, proxyPort);\n        }\n\n\t\tthis.httpClient.getParams().setCookiePolicy(\"default\");\n    } else {\n        // Create new HTTP connection.\n        this.httpClient.getHostConfiguration().setHost(this.serverIp, 80, \"http\");\n    }\n\n    this.httpClient.getParams().setCookiePolicy(\"default\");\n\n    // If username and password supplied, then use basicAuth.\n    if( this.username && this.password ) {\n        this.httpClient.getParams().setAuthenticationPreemptive(true);\n        this.defaultcreds = new UsernamePasswordCredentials(this.username, this.password);\n        this.httpClient.getState().setCredentials(new AuthScope(this.serverIp, -1, null), this.defaultcreds);\n    }\n};\n\nhttpRequest.prototype.contentType = function(contentType) {\n    this.contentType = contentType;\n\n    this.contentTypes = [\n        [\"xml\",\"application/xml\"],\n        [\"json\",\"application/json\"]\n    ];\n\n    for( this.i=0; this.i<this.contentTypes.length; this.i++)\n        if(this.contentTypes[this.i][0] == this.contentType) {\n            this.httpMethod.addRequestHeader(\"Content-Type\", this.contentTypes[this.i][1]);\n            this.httpMethod.addRequestHeader(\"Accept\", this.contentTypes[this.i][1]);\n        }\n};\n\nhttpRequest.prototype.addHeader = function(headerName,headerValue) {\n    this.headerName = headerName;\n    this.headerValue = headerValue;\n\n    this.httpMethod.addRequestHeader(this.headerName, this.headerValue);\n};\n\nhttpRequest.prototype.execute = function() {\n    // Connection:close is hard coded here in order to ensure that the TCP connection\n    // gets torn down immediately after the request. Comment this line out if you wish to\n    // experiment with HTTP persistence.\n    this.httpMethod.addRequestHeader(\"Connection\", \"close\");\n\n    this.httpClient.executeMethod(this.httpMethod);\n\n    // Retrieve status code.\n    this.statusCode = this.httpMethod.getStatusCode();\n\n    return this.statusCode;\n}\n\nhttpRequest.prototype.getRequest = function(uri) {\n    this.uri = uri;\n\n    // Get request.\n    this.httpMethod = new GetMethod(this.uri);\n};\n\nhttpRequest.prototype.postRequest = function(uri,bodytext) {\n    this.uri = uri;\n    this.bodytext = bodytext;\n\n    // POST Request.\n    this.httpMethod = new PostMethod(this.uri);\n    this.httpMethod.setRequestEntity(new StringRequestEntity(this.bodytext));\n};\n\nhttpRequest.prototype.getResponse = function(asType) {\n    this.asType = asType;\n\n    if( this.asType == \"asStream\" )\n        return this.httpMethod.getResponseBodyAsStream();\n    else\n        return this.httpMethod.getResponseBodyAsString();\n};\n\nhttpRequest.prototype.deleteRequest = function(uri) {\n    this.uri = uri;\n\n    // Get request.\n    this.httpMethod = new DeleteMethod(this.uri);\n};\n\nhttpRequest.prototype.disconnect = function() {\n    // Release connection.\n    this.httpMethod.releaseConnection();\n};\n\n\n\nfunction statusCheck(statusCode) {\n  //----------------------------------------------------------------------------\n  // Author:      Rob Edwards (@clijockey/robedwa@cisco.com)\n  // Description: Check the status code after Spark API call\n  //----------------------------------------------------------------------------\n\n  if ((statusCode == 200) || (statusCode == 204)) {\n      logger.addInfo(\"All looks good. HTTP response code: \"+statusCode);\n      return\n  } else if (statusCode == 400) {\n        logger.addError(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n        logger.addInfo(\"Return code \"+statusCode+\": The request was invalid or cannot be otherwise served. An accompanying error message will explain further.\");\n        logger.addError(\"Response received: \"+request.getResponse(\"asString\"));\n        // Set this task as failed.\n        ctxt.setFailed(\"Request failed.\");\n  } else if (statusCode == 401) {\n      logger.addError(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n      logger.addInfo(\"Return code \"+statusCode+\": Authentication credentials were missing or incorrect.\");\n      logger.addEror(\"Response received: \"+request.getResponse(\"asString\"));\n      // Set this task as failed.\n      ctxt.setFailed(\"Request failed.\");\n  } else if (statusCode == 403) {\n      logger.addError(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n      logger.addInfo(\"Return code \"+statusCode+\": The request is understood, but it has been refused or access is not allowed.\");\n      logger.addError(\"Response received: \"+request.getResponse(\"asString\"));\n      // Set this task as failed.\n      ctxt.setFailed(\"Request failed.\");\n  } else if (statusCode == 404) {\n      logger.addError(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n      logger.addInfo(\"Return code \"+statusCode+\": The URI requested is invalid or the resource requested, such as a user, does not exist. Also returned when the requested format is not supported by the requested method.\");\n      logger.addError(\"Response received: \"+request.getResponse(\"asString\"));\n      // Set this task as failed.\n      ctxt.setFailed(\"Request failed.\");\n  } else if (statusCode == 409) {\n      logger.addWarn(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n      logger.addInfo(\"Return code \"+statusCode+\": The request could not be processed because it conflicts with some established rule of the system. For example, a person may not be added to a room more than once.\");\n      logger.addError(\"Response received: \"+request.getResponse(\"asString\"));\n      // Set this task as failed.\n      ctxt.setFailed(\"Request failed.\");\n  } else if (statusCode == 500) {\n      logger.addError(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n      logger.addInfo(\"Return code \"+statusCode+\": Something went wrong on the server.\");\n      logger.addError(\"Response received: \"+request.getResponse(\"asString\"));\n      // Set this task as failed.\n      ctxt.setFailed(\"Request failed.\");\n  } else if (statusCode == 501) {\n      logger.addError(\"Failed to configure Spark. HTTP response code: \"+statusCode);\n      logger.addInfo(\"Return code \"+statusCode+\": Server is overloaded with requests. Try again later.\");\n      logger.addError(\"Response received: \"+request.getResponse(\"asString\"));\n      // Set this task as failed.\n      ctxt.setFailed(\"Request failed.\");\n  } else {\n      logger.addError(\"An unknown response code has occured therefore exiting: \"+statusCode);\n      ctxt.setFailed(\"Request failed.\");\n  }\n}\n\nfunction clean(response, toClean) {\n  //----------------------------------------------------------------------------\n  // Author:      Rob Edwards (@clijockey/robedwa@cisco.com)\n  // Description: Clean up the response by stripping out the extra \"\"\n  //----------------------------------------------------------------------------\n  this.response = response;\n  this.toClean = toClean;\n\n  logger.addInfo(\"Running through a clean up to ontain the \"+toClean+\" value.\");\n  this.cleaned = new String();\n  this.cleaned = JSON.getJsonElement(this.response, this.toClean).toString().replace(/\"/g, \"\");\n  logger.addInfo(\"Value cleaned up, returning :\"+this.cleaned);\n  return this.cleaned;\n}\n\nfunction getRoomIdFromName(token, roomId) {\n    this.destination = \"api.ciscospark.com\";\n    this.token = token;\n    this.roomId = roomId;\n    \n    var request = new httpRequest();\n    request.setup(this.destination,\"https\");\n    request.getRequest(\'/v1/rooms\');\n    request.contentType(\"json\");\n    request.addHeader(\"Authorization\", \"Bearer \" + this.token);\n\n    var statusCode = request.execute();\n    statusCheck(statusCode);\n\n    this.value = request.getResponse(\"asString\");\n    logger.addInfo(\"Raw returned vaules: \" +value);\n\n    var sparkroomid = \"none\";\n    var sparkroomtitle = \"none\";\n    var data = JSON.getJsonElement(value, null);\n    var jsonData = JSON.getJsonElement(data, \"items\")\n    for (var i = 0; i < jsonData.size(); i++) {\n        \n        if (JSON.getJsonElement(jsonData.get(i), \"title\").toString().replace(/\"/g, \"\") == this.roomId) {\n            logger.addInfo(\"Spark Room:      \" + this.roomId + \" Found!\" );\n            sparkroomtitle = JSON.getJsonElement(jsonData.get(i), \"title\").toString().replace(/\"/g, \"\");\n            sparkroomid = JSON.getJsonElement(jsonData.get(i), \"id\").toString().replace(/\"/g, \"\");\n            logger.addInfo(\"Spark Room Id:   \"+sparkroomid);\n            logger.addInfo(\"Spark Room Name: \"+sparkroomtitle);\n            break;\n        }\n    }\n\n    request.disconnect();\n    logger.addInfo(\"Returning this Spark Room Id:   \"+sparkroomid);\n    return sparkroomid;\n    //return \"Y2lzY29zcGFyazovL3VzL1JPT00vY2QyZDY1YTAtNzIzZi0xMWU3LThlYjYtY2YyMjhiZGY5OTRm\";\n}\nfunction messagePost(token,roomId,message,file) {\n  //----------------------------------------------------------------------------\n  // Author:      Rob Edwards (@clijockey/robedwa@cisco.com)\n  // Description: Post a message into a Spark Room\n  //----------------------------------------------------------------------------\n    this.destination = \"api.ciscospark.com\";\n    this.token = token;\n    this.roomId = roomId;\n    this.message = message;\n    this.file = file;\n\n    // Construct JSON:\n    var body = new HashMap();\n    body.put(\"roomId\", roomId);\n\n    // Check if this will be posting a message and/or file to the room\n    if (!message.equals(\"\")) {\n      body.put(\"text\", message);\n    }\n    if (!file.equals(\"\")) {\n      body.put(\"file\", file);\n    }\n    var jsonBody = JSON.javaToJsonString(body, body.getClass());\n    logger.addInfo(\"Sending JSON: \" + jsonBody);\n\n    // Make Rest call\n    var request = new httpRequest();\n    request.setup(this.destination,\"https\");\n    request.postRequest(\'/v1/messages\', jsonBody);\n    request.contentType(\"json\");\n    request.addHeader(\"Authorization\", \"Bearer \" + token);\n\n    var statusCode = request.execute();\n    statusCheck(statusCode);\n\n    this.value = request.getResponse(\"asString\");\n    logger.addInfo(\"Raw returned vaules: \"+this.value);\n\n    this.messageId = clean(value, \"id\");\n\n    request.disconnect();\n    return [messageId];\n}\n\nfunction registerUndoTask(token,messageId) {\n    // register undo task\n    var undoHandler = \"custom_Spark_messages_delete\";\n    var undoContext = ctxt.createInnerTaskContext(undoHandler);\n    var undoConfig = undoContext.getConfigObject();\n\n    // These are the variables that the rollback wf task gets called with.\n    undoConfig.token = token;\n    undoConfig.messageId = messageId;\n    undoConfig.proxyHost = proxyHost;\n    undoConfig.proxyPort = proxyPort;\n\n    ctxt.getChangeTracker().undoableResourceModified(\"Rollback post message\",\n                \"\",\"rollback \",\n                \"Rollback \"+messageId+\".\",undoHandler,undoConfig);\n}\n\n//////////////////////////////////////////////////////////////////////////////////////////\n\n// main();\n\n// Workflow Inputs.\nvar token = input.token;\nvar message = input.message;\nvar file = input.file;\nvar roomId = input.roomId;\nvar proxyHost = input.proxyHost;\nvar proxyPort = input.proxyPort;\n\n\nvar sparkRoomId = getRoomIdFromName(token, roomId);\n\nif (sparkRoomId == \"none\") {\n    logger.addInfo(\"Room not found - room: \"+roomId+ \" was not found\");\n    // Set this task as failed.\n    ctxt.setFailed(\"Request failed.\");\n} else {\n\n    var result = messagePost(token,sparkRoomId,message,file);\n    logger.addInfo(\"Result: \"+result);\n\n    if (result)\n        logger.addInfo(\"Successfully posted message\");\n        output.messageId = result[0];\n}\n\n// Register rollback task, this is an optional setting.\nif (input.rollback == 1) {\n    registerUndoTask(token,result[0]);\n    logger.addInfo(\"The rollback option has been enabled, you will be able to rollback to poting of the message.\");\n} else {\n    logger.addInfo(\"You will not be able to rollback the post message task due to \'no rollback\' being selected.\");\n}\n","taskData":"eyJuYW1lIjoiU3BhcmtfbWVzc2FnZXNfY3JlYXRlIiwibGFiZWwiOiJDcmVhdGUgbWVzc2FnZSBpbiBTcGFyayByb29tIiwicmVnaXN0ZXJVbmRlclRyZWUiOiJTcGFyayIsImlzQWN0aXZlIjp0cnVlLCJpc0hpZGRlbiI6ZmFsc2UsInN1bW1hcnkiOiJQb3N0IGEgbWVzc2FnZSB0byBhIFNwYXJrIHJvb20uXG4iLCJkZXNjcmlwdGlvbiI6IlBvc3QgYSBtZXNzYWdlIHRvIGEgcm9vbS5cblxuUG9zdHMgYSBwbGFpbiB0ZXh0IG1lc3NhZ2UsIGFuZCBvcHRpb25hbGx5IGEgbWVkaWEgY29udGVudCBhdHRhY2htZW50LCB0byBhIHJvb20uIiwidWNzZEZyb21WZXJzaW9uIjoiNi41LjAuMCIsImNvbmZpZyI6eyJuYW1lIjoiSW5wdXRDb25maWciLCJmaWVsZHMiOnsibGlzdCI6W3sibmFtZSI6InRva2VuIiwibGFiZWwiOiJ0b2tlbiIsInBlcnNpc3QiOnRydWUsImNvbHVtbkluZm8iOm51bGwsInR5cGUiOiJ0ZXh0IiwibWFwVG9UeXBlIjoiZ2VuX3RleHRfaW5wdXQiLCJtYW5kYXRvcnkiOnRydWUsInJiaWQiOiIiLCJzaXplIjoibWVkaXVtIiwiaGVscCI6IiIsImFubm90YXRpb24iOiIiLCJncm91cCI6IiIsInZhbGlkYXRlIjpmYWxzZSwiZm9ybU1hbmFnZWRUYWJsZSI6ZmFsc2UsImFkZEVudHJ5Rm9ybSI6IiIsImVkaXRFbnRyeUZvcm0iOiIiLCJkZWxldGVFbnRyeUZvcm0iOiIiLCJtb3ZlVXBGb3JtIjoiIiwibW92ZURvd25Gb3JtIjoiIiwiaW5mb0VudHJ5Rm9ybSI6IiIsInJ1bkFjdGlvbkZvcm0iOiIiLCJlZGl0YWJlIjp0cnVlLCJoaWRkZW4iOmZhbHNlLCJtdWx0aWxpbmUiOmZhbHNlLCJtYXhMZW5ndGgiOjEyOCwibG92IjoiIiwibG92UHJvdmlkZXIiOiIiLCJvcmRlciI6OTk5OTksInVwbG9hZERpciI6IiIsInRhYmxlIjoiIiwidmFsaWRhdG9yIjoiIiwicmVnZXgiOiIuKiIsInJlZ2V4TGFiZWwiOiIuKiIsIm1pblZhbHVlIjotOTIyMzM3MjAzNjg1NDc3NTgwOCwibWF4VmFsdWUiOjkyMjMzNzIwMzY4NTQ3NzU4MDcsImhpZGVGaWVsZE5hbWUiOiIiLCJoaWRlRmllbGRWYWx1ZSI6IiIsImhpZGVGaWVsZENvbmRpdGlvbiI6IkVRIiwiaHRtbFBvcHVwVGFnIjoiIiwiaHRtbFBvcHVwTGFiZWwiOiIiLCJodG1sUG9wdXBTdHlsZSI6MCwiaHRtbFBvcHVwVGV4dCI6IiIsInZpZXciOiIiLCJ2YWx1ZXMiOltdfSx7Im5hbWUiOiJtZXNzYWdlIiwibGFiZWwiOiJNZXNzYWdlIiwicGVyc2lzdCI6dHJ1ZSwiY29sdW1uSW5mbyI6bnVsbCwidHlwZSI6InRleHQiLCJtYXBUb1R5cGUiOiJnZW5fdGV4dF9pbnB1dCIsIm1hbmRhdG9yeSI6dHJ1ZSwicmJpZCI6IiIsInNpemUiOiJtZWRpdW0iLCJoZWxwIjoiIiwiYW5ub3RhdGlvbiI6IiIsImdyb3VwIjoiIiwidmFsaWRhdGUiOmZhbHNlLCJmb3JtTWFuYWdlZFRhYmxlIjpmYWxzZSwiYWRkRW50cnlGb3JtIjoiIiwiZWRpdEVudHJ5Rm9ybSI6IiIsImRlbGV0ZUVudHJ5Rm9ybSI6IiIsIm1vdmVVcEZvcm0iOiIiLCJtb3ZlRG93bkZvcm0iOiIiLCJpbmZvRW50cnlGb3JtIjoiIiwicnVuQWN0aW9uRm9ybSI6IiIsImVkaXRhYmUiOnRydWUsImhpZGRlbiI6ZmFsc2UsIm11bHRpbGluZSI6dHJ1ZSwibWF4TGVuZ3RoIjo1MTIsImxvdiI6IiIsImxvdlByb3ZpZGVyIjoiIiwib3JkZXIiOjk5OTk5LCJ1cGxvYWREaXIiOiIiLCJ0YWJsZSI6IiIsInZhbGlkYXRvciI6IiIsInJlZ2V4IjoiLioiLCJyZWdleExhYmVsIjoiLioiLCJtaW5WYWx1ZSI6LTkyMjMzNzIwMzY4NTQ3NzU4MDgsIm1heFZhbHVlIjo5MjIzMzcyMDM2ODU0Nzc1ODA3LCJoaWRlRmllbGROYW1lIjoiIiwiaGlkZUZpZWxkVmFsdWUiOiIiLCJoaWRlRmllbGRDb25kaXRpb24iOiJFUSIsImh0bWxQb3B1cFRhZyI6IiIsImh0bWxQb3B1cExhYmVsIjoiIiwiaHRtbFBvcHVwU3R5bGUiOjAsImh0bWxQb3B1cFRleHQiOiJUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgcGVyc29uIHlvdSB3b3VsZCBsaWtlIHRvIGFkZCB0byBhIFNwYXJrIGdyb3VwLiIsInZpZXciOiIiLCJ2YWx1ZXMiOltdfSx7Im5hbWUiOiJyb29tSWQiLCJsYWJlbCI6IlNwYXJrIFJvb20gSWQiLCJwZXJzaXN0Ijp0cnVlLCJjb2x1bW5JbmZvIjpudWxsLCJ0eXBlIjoidGV4dCIsIm1hcFRvVHlwZSI6Imdlbl90ZXh0X2lucHV0IiwibWFuZGF0b3J5Ijp0cnVlLCJyYmlkIjoiIiwic2l6ZSI6Im1lZGl1bSIsImhlbHAiOiIiLCJhbm5vdGF0aW9uIjoiIiwiZ3JvdXAiOiIiLCJ2YWxpZGF0ZSI6ZmFsc2UsImZvcm1NYW5hZ2VkVGFibGUiOmZhbHNlLCJhZGRFbnRyeUZvcm0iOiIiLCJlZGl0RW50cnlGb3JtIjoiIiwiZGVsZXRlRW50cnlGb3JtIjoiIiwibW92ZVVwRm9ybSI6IiIsIm1vdmVEb3duRm9ybSI6IiIsImluZm9FbnRyeUZvcm0iOiIiLCJydW5BY3Rpb25Gb3JtIjoiIiwiZWRpdGFiZSI6dHJ1ZSwiaGlkZGVuIjpmYWxzZSwibXVsdGlsaW5lIjpmYWxzZSwibWF4TGVuZ3RoIjoxMjgsImxvdiI6IiIsImxvdlByb3ZpZGVyIjoiIiwib3JkZXIiOjk5OTk5LCJ1cGxvYWREaXIiOiIiLCJ0YWJsZSI6IiIsInZhbGlkYXRvciI6IiIsInJlZ2V4IjoiLioiLCJyZWdleExhYmVsIjoiLioiLCJtaW5WYWx1ZSI6LTkyMjMzNzIwMzY4NTQ3NzU4MDgsIm1heFZhbHVlIjo5MjIzMzcyMDM2ODU0Nzc1ODA3LCJoaWRlRmllbGROYW1lIjoiIiwiaGlkZUZpZWxkVmFsdWUiOiIiLCJoaWRlRmllbGRDb25kaXRpb24iOiJFUSIsImh0bWxQb3B1cFRhZyI6IiIsImh0bWxQb3B1cExhYmVsIjoiIiwiaHRtbFBvcHVwU3R5bGUiOjAsImh0bWxQb3B1cFRleHQiOiIiLCJ2aWV3IjoiIiwidmFsdWVzIjpbXX0seyJuYW1lIjoiZmlsZSIsImxhYmVsIjoiZmlsZSIsInBlcnNpc3QiOnRydWUsImNvbHVtbkluZm8iOm51bGwsInR5cGUiOiJ0ZXh0IiwibWFwVG9UeXBlIjoiZ2VuX3RleHRfaW5wdXQiLCJtYW5kYXRvcnkiOmZhbHNlLCJyYmlkIjoiIiwic2l6ZSI6Im1lZGl1bSIsImhlbHAiOiIiLCJhbm5vdGF0aW9uIjoiIiwiZ3JvdXAiOiIiLCJ2YWxpZGF0ZSI6ZmFsc2UsImZvcm1NYW5hZ2VkVGFibGUiOmZhbHNlLCJhZGRFbnRyeUZvcm0iOiIiLCJlZGl0RW50cnlGb3JtIjoiIiwiZGVsZXRlRW50cnlGb3JtIjoiIiwibW92ZVVwRm9ybSI6IiIsIm1vdmVEb3duRm9ybSI6IiIsImluZm9FbnRyeUZvcm0iOiIiLCJydW5BY3Rpb25Gb3JtIjoiIiwiZWRpdGFiZSI6dHJ1ZSwiaGlkZGVuIjpmYWxzZSwibXVsdGlsaW5lIjpmYWxzZSwibWF4TGVuZ3RoIjoxMjgsImxvdiI6IiIsImxvdlByb3ZpZGVyIjoiIiwib3JkZXIiOjk5OTk5LCJ1cGxvYWREaXIiOiIiLCJ0YWJsZSI6IiIsInZhbGlkYXRvciI6IiIsInJlZ2V4IjoiLioiLCJyZWdleExhYmVsIjoiLioiLCJtaW5WYWx1ZSI6LTkyMjMzNzIwMzY4NTQ3NzU4MDgsIm1heFZhbHVlIjo5MjIzMzcyMDM2ODU0Nzc1ODA3LCJoaWRlRmllbGROYW1lIjoiIiwiaGlkZUZpZWxkVmFsdWUiOiIiLCJoaWRlRmllbGRDb25kaXRpb24iOiJFUSIsImh0bWxQb3B1cFRhZyI6IiIsImh0bWxQb3B1cExhYmVsIjoiIiwiaHRtbFBvcHVwU3R5bGUiOjAsImh0bWxQb3B1cFRleHQiOiIiLCJ2aWV3IjoiIiwidmFsdWVzIjpbXX0seyJuYW1lIjoicHJveHlIb3N0IiwibGFiZWwiOiJwcm94eUhvc3QiLCJwZXJzaXN0Ijp0cnVlLCJjb2x1bW5JbmZvIjpudWxsLCJ0eXBlIjoidGV4dCIsIm1hcFRvVHlwZSI6Imdlbl90ZXh0X2lucHV0IiwibWFuZGF0b3J5IjpmYWxzZSwicmJpZCI6IiIsInNpemUiOiJtZWRpdW0iLCJoZWxwIjoiIiwiYW5ub3RhdGlvbiI6IiIsImdyb3VwIjoiIiwidmFsaWRhdGUiOmZhbHNlLCJmb3JtTWFuYWdlZFRhYmxlIjpmYWxzZSwiYWRkRW50cnlGb3JtIjoiIiwiZWRpdEVudHJ5Rm9ybSI6IiIsImRlbGV0ZUVudHJ5Rm9ybSI6IiIsIm1vdmVVcEZvcm0iOiIiLCJtb3ZlRG93bkZvcm0iOiIiLCJpbmZvRW50cnlGb3JtIjoiIiwicnVuQWN0aW9uRm9ybSI6IiIsImVkaXRhYmUiOnRydWUsImhpZGRlbiI6ZmFsc2UsIm11bHRpbGluZSI6ZmFsc2UsIm1heExlbmd0aCI6MTI4LCJsb3YiOiIiLCJsb3ZQcm92aWRlciI6IiIsIm9yZGVyIjo5OTk5OSwidXBsb2FkRGlyIjoiIiwidGFibGUiOiIiLCJ2YWxpZGF0b3IiOiIiLCJyZWdleCI6Ii4qIiwicmVnZXhMYWJlbCI6Ii4qIiwibWluVmFsdWUiOi05MjIzMzcyMDM2ODU0Nzc1ODA4LCJtYXhWYWx1ZSI6OTIyMzM3MjAzNjg1NDc3NTgwNywiaGlkZUZpZWxkTmFtZSI6IiIsImhpZGVGaWVsZFZhbHVlIjoiIiwiaGlkZUZpZWxkQ29uZGl0aW9uIjoiRVEiLCJodG1sUG9wdXBUYWciOiIiLCJodG1sUG9wdXBMYWJlbCI6IiIsImh0bWxQb3B1cFN0eWxlIjowLCJodG1sUG9wdXBUZXh0IjoiIiwidmlldyI6IiIsInZhbHVlcyI6W119LHsibmFtZSI6InByb3h5UG9ydCIsImxhYmVsIjoicHJveHlQb3J0IiwicGVyc2lzdCI6dHJ1ZSwiY29sdW1uSW5mbyI6bnVsbCwidHlwZSI6InRleHQiLCJtYXBUb1R5cGUiOiJnZW5fdGV4dF9pbnB1dCIsIm1hbmRhdG9yeSI6ZmFsc2UsInJiaWQiOiIiLCJzaXplIjoibWVkaXVtIiwiaGVscCI6IiIsImFubm90YXRpb24iOiIiLCJncm91cCI6IiIsInZhbGlkYXRlIjpmYWxzZSwiZm9ybU1hbmFnZWRUYWJsZSI6ZmFsc2UsImFkZEVudHJ5Rm9ybSI6IiIsImVkaXRFbnRyeUZvcm0iOiIiLCJkZWxldGVFbnRyeUZvcm0iOiIiLCJtb3ZlVXBGb3JtIjoiIiwibW92ZURvd25Gb3JtIjoiIiwiaW5mb0VudHJ5Rm9ybSI6IiIsInJ1bkFjdGlvbkZvcm0iOiIiLCJlZGl0YWJlIjp0cnVlLCJoaWRkZW4iOmZhbHNlLCJtdWx0aWxpbmUiOmZhbHNlLCJtYXhMZW5ndGgiOjEyOCwibG92IjoiIiwibG92UHJvdmlkZXIiOiIiLCJvcmRlciI6OTk5OTksInVwbG9hZERpciI6IiIsInRhYmxlIjoiIiwidmFsaWRhdG9yIjoiIiwicmVnZXgiOiIuKiIsInJlZ2V4TGFiZWwiOiIuKiIsIm1pblZhbHVlIjotOTIyMzM3MjAzNjg1NDc3NTgwOCwibWF4VmFsdWUiOjkyMjMzNzIwMzY4NTQ3NzU4MDcsImhpZGVGaWVsZE5hbWUiOiIiLCJoaWRlRmllbGRWYWx1ZSI6IiIsImhpZGVGaWVsZENvbmRpdGlvbiI6IkVRIiwiaHRtbFBvcHVwVGFnIjoiIiwiaHRtbFBvcHVwTGFiZWwiOiIiLCJodG1sUG9wdXBTdHlsZSI6MCwiaHRtbFBvcHVwVGV4dCI6IiIsInZpZXciOiIiLCJ2YWx1ZXMiOltdfSx7Im5hbWUiOiJyb2xsYmFjayIsImxhYmVsIjoicm9sbGJhY2siLCJwZXJzaXN0Ijp0cnVlLCJjb2x1bW5JbmZvIjpudWxsLCJ0eXBlIjoibnVtYmVyIiwibWFwVG9UeXBlIjoiIiwibWFuZGF0b3J5Ijp0cnVlLCJyYmlkIjoiIiwic2l6ZSI6Im1lZGl1bSIsImhlbHAiOiIiLCJhbm5vdGF0aW9uIjoiIiwiZ3JvdXAiOiIiLCJ2YWxpZGF0ZSI6ZmFsc2UsImZvcm1NYW5hZ2VkVGFibGUiOmZhbHNlLCJhZGRFbnRyeUZvcm0iOiIiLCJlZGl0RW50cnlGb3JtIjoiIiwiZGVsZXRlRW50cnlGb3JtIjoiIiwibW92ZVVwRm9ybSI6IiIsIm1vdmVEb3duRm9ybSI6IiIsImluZm9FbnRyeUZvcm0iOiIiLCJydW5BY3Rpb25Gb3JtIjoiIiwiZWRpdGFiZSI6dHJ1ZSwiaGlkZGVuIjpmYWxzZSwibXVsdGlsaW5lIjpmYWxzZSwibWF4TGVuZ3RoIjoxMjgsImxvdiI6IiIsImxvdlByb3ZpZGVyIjoiIiwib3JkZXIiOjk5OTk5LCJ1cGxvYWREaXIiOiIiLCJ0YWJsZSI6IiIsInZhbGlkYXRvciI6IiIsInJlZ2V4IjoiLioiLCJyZWdleExhYmVsIjoiLioiLCJtaW5WYWx1ZSI6LTkyMjMzNzIwMzY4NTQ3NzU4MDgsIm1heFZhbHVlIjo5MjIzMzcyMDM2ODU0Nzc1ODA3LCJoaWRlRmllbGROYW1lIjoiIiwiaGlkZUZpZWxkVmFsdWUiOiIiLCJoaWRlRmllbGRDb25kaXRpb24iOiJFUSIsImh0bWxQb3B1cFRhZyI6IiIsImh0bWxQb3B1cExhYmVsIjoiIiwiaHRtbFBvcHVwU3R5bGUiOjAsImh0bWxQb3B1cFRleHQiOiIiLCJ2aWV3IjoiIiwidmFsdWVzIjpbXX1dLCJtb1R5cGVOYW1lIjoiY29tLmNsb3VwaWEuc2VydmljZS5jSU0uaW5mcmFtZ3IubWR1aS5NRFVJRmllbGREZXNjciIsInZhbGlkYXRvck5hbWUiOiJNRFVJRmllbGRMaXN0VmFsaWRhdG9yIn19LCJvdXRwdXRzIjp7Imxpc3QiOlt7Im5hbWUiOiJtZXNzYWdlSWQiLCJkZXNjcmlwdGlvbiI6Im1lc3NhZ2VJZCIsInR5cGUiOiJnZW5fdGV4dF9pbnB1dCJ9XSwibW9UeXBlTmFtZSI6ImNvbS5jbG91cGlhLnNlcnZpY2UuY0lNLmluZnJhbWdyLm1kdWkuTURVSVdvcmtmbG93VGFza091dHB1dERlc2NyIiwidmFsaWRhdG9yTmFtZSI6Ik1EVUlPdXRwdXRMaXN0VmFsaWRhdG9yIn0sImV4ZWN1dGlvbkxhbmciOiJKYXZhc2NyaXB0IiwiaXNSZXBvVXNlZCI6ZmFsc2UsInJlcG9OaWNrbmFtZSI6IiIsInNjcmlwdEZpbGVuYW1lIjoiIiwiZmlsZVNIQSI6bnVsbCwiZXhlY3V0aW9uU2NyaXB0IjoiLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVGl0bGU6ICAgICAgICAgICAgICAgU3BhcmtfbWVzc2FnZXNfcG9zdFxuLy8gRGVzY3JpcHRpb246ICAgICAgICAgVGhpcyB3aWxsIHBvc3QgYSBtZXNzYWdlIHRvIGEgc3BlY2lmaWMgc3BhcmsgZ3JvdXBcbi8vXG4vLyBBdXRob3I6ICAgICAgICAgICAgICBSb2IgRWR3YXJkcyAoQGNsaWpvY2tleS9yb2JlZHdhQGNpc2NvLmNvbSlcbi8vIERhdGU6ICAgICAgICAgICAgICAgIDE4LzEyLzIwMTVcbi8vIFZlcnNpb246ICAgICAgICAgICAgIDEuMyAodXBkYXRlZCAyNy8wMS8yMDE2KVxuLy8gRGVwZW5kZW5jaWVzOlxuLy8gTGltaXRhdGlvbnMvaXNzdWVzOiAgVXBkYXRlZCBmb3IgVUNTRCA1LjQgYW5kIHRlc3RlZCBvbiA1LjQuMC4xXG4vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmltcG9ydFBhY2thZ2UoamF2YS51dGlsKTtcbmltcG9ydFBhY2thZ2UoamF2YS5sYW5nKTtcbmltcG9ydFBhY2thZ2UoamF2YS5pbyk7XG5pbXBvcnRQYWNrYWdlKGNvbS5jbG91cGlhLmxpYi51dGlsKTtcbmltcG9ydFBhY2thZ2Uob3JnLmFwYWNoZS5jb21tb25zLmh0dHBjbGllbnQpO1xuaW1wb3J0UGFja2FnZShvcmcuYXBhY2hlLmNvbW1vbnMuaHR0cGNsaWVudC5jb29raWUpO1xuaW1wb3J0UGFja2FnZShvcmcuYXBhY2hlLmNvbW1vbnMuaHR0cGNsaWVudC5tZXRob2RzKTtcbmltcG9ydFBhY2thZ2Uob3JnLmFwYWNoZS5jb21tb25zLmh0dHBjbGllbnQuYXV0aCk7XG5pbXBvcnRQYWNrYWdlKG9yZy5hcGFjaGUuY29tbW9ucy5odHRwY2xpZW50LnByb3RvY29sKTtcbmltcG9ydENsYXNzKG9yZy5hcGFjaGUuY29tbW9ucy5odHRwY2xpZW50LnByb3RvY29sLlNlY3VyZVByb3RvY29sU29ja2V0RmFjdG9yeSk7XG5pbXBvcnRQYWNrYWdlKGNvbS5jbG91cGlhLmxpYi5jSWFhUy52Y2QuYXBpKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL1xuLy8gICAgICAgIEF1dGhvcjogUnVzcyBXaGl0ZWFyIChyd2hpdGVhckBjaXNjby5jb20pXG4vL1xuLy8gRnVuY3Rpb24gTmFtZTogaHR0cFJlcXVlc3QoKVxuLy9cbi8vICAgICAgIFZlcnNpb246IDMuMFxuLy9cbi8vIE1vZGlmaWNhdGlvbnM6IEFkZGVkIEhUVFAgaGVhZGVyIENvbm5lY3Rpb246Y2xvc2UgdG8gZXhlY3V0ZSBtZXRob2QgdG8gb3ZlcmNvbWUgdGhlXG4vLyAgICAgICAgICAgICAgICBDTE9TRV9XQUlUIGlzc3VlIGNhdXNlZCB3aXRoIHJlbGVhc2VDb25uZWN0aW9uKCkuXG4vL1xuLy8gICAgICAgICAgICAgICAgTW9kaWZpZWQgU1NMIHNvY2tldCBmYWN0b3J5IGNvZGUgdG8gd29yayB3aXRoIFVDUyBEaXJlY3RvciA1LjQuMC4wLlxuLy9cbi8vICAgRGVzY3JpcHRpb246IEhUVFAgUmVxdWVzdCBmdW5jdGlvbiAtIGh0dHBSZXF1ZXN0LlxuLy9cbi8vICAgICAgICAgICAgICAgIEkgaGF2ZSBtYWRlIHRoZSBodHRwQ2xpZW50IGZ1bmN0aW9uYWxpdHkgbW9yZSBvYmplY3QgbGlrZSBpbiBvcmRlciB0b1xuLy8gICAgICAgICAgICAgICAgbWFrZSBjbG91cGlhIHNjcmlwdHMgbW9yZSByZWFkYWJsZSB3aGVuIG1ha2luZyBtYW55L211bHRpcGxlIEhUVFAvSFRUUFNcbi8vICAgICAgICAgICAgICAgIHJlcXVlc3RzIHdpdGhpbiBhIHNpbmdsZSBzY3JpcHQuXG4vL1xuLy8gICAgICBVc2FnZTogMS4gdmFyIHJlcXVlc3QgPSBuZXcgaHR0cFJlcXVlc3QoKTsgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyBvYmplY3QuXG4vL1xuLy8gICAgICAgICAgICAgMi4gcmVxdWVzdC5zZXR1cChcIjE5Mi4xNjguMTAuMTBcIixcImh0dHBzXCIsXCJhZG1pblwiLFwiY2lzY28xMjNcIik7ICAgICAgLy8gU1NMLlxuLy8gICAgICAgICAgb3I6ICAgcmVxdWVzdC5zZXR1cChcIjE5Mi4xNjguMTAuMTBcIixcImh0dHBcIixcImFkbWluXCIsXCJjaXNjbzEyM1wiKTsgICAgICAgLy8gSFRUUC5cbi8vICAgICAgICAgIG9yOiAgIHJlcXVlc3Quc2V0dXAoXCIxOTIuMTY4LjEwLjEwXCIsXCJodHRwc1wiKTsgICAgICAgICAgIC8vIFNTTCwgbm8gYmFzaWNBdXRoLlxuLy8gICAgICAgICAgb3I6ICAgcmVxdWVzdC5zZXR1cChcIjE5Mi4xNjguMTAuMTBcIixcImh0dHBcIik7ICAgICAgICAgICAgLy8gSFRUUCwgbm8gYmFzaWNBdXRoLlxuLy9cbi8vICAgICAgICAgICAgIDMuIHJlcXVlc3QuZ2V0UmVxdWVzdChcIi9cIik7ICAgICAgICAgICAgICAgICAgICAvLyBIVFRQIEdFVCAoVVJJKS5cbi8vICAgICAgICAgIG9yOiAgIHJlcXVlc3QucG9zdFJlcXVlc3QoXCIvXCIsXCJzb21lIGJvZHkgdGV4dFwiKTsgIC8vIEhUVFAgUE9TVCAoVVJJLEJvZHlUZXh0KS5cbi8vICAgICAgICAgIG9yOiAgIHJlcXVlc3QuZGVsZXRlUmVxdWVzdChcIi9cIik7ICAgICAgICAgICAgICAgICAvLyBIVFRQIERFTEVURSAoVVJJKS5cbi8vXG4vLyAgKG9wdGlvbmFsKSA0LiByZXF1ZXN0LmNvbnRlbnRUeXBlKFwianNvblwiKTsgICAgICAgICAgICAvLyBBZGQgQ29udGVudC1UeXBlIEhUVFAgaGVhZGVyLlxuLy8gICAgICAgICAgb3I6ICAgcmVxdWVzdC5jb250ZW50VHlwZShcInhtbFwiKTtcbi8vXG4vLyAgKG9wdGlvbmFsKSA1LiByZXF1ZXN0LmFkZEhlYWRlcihcIlgtQ2xvdXBpYS1SZXF1ZXN0LUtleVwiLFwiMTIzNDU2Nzg5MFwiKTsgIC8vIEFueSBIZWFkZXIuXG4vL1xuLy8gICAgICAgICAgICAgNi4gdmFyIHN0YXR1c0NvZGUgPSByZXF1ZXN0LmV4ZWN1dGUoKTsgICAgICAgICAgICAgICAgICAgICAvLyBTZW5kIHJlcXVlc3QuXG4vL1xuLy8gICAgICAgICAgICAgNy4gdmFyIHJlc3BvbnNlID0gcmVxdWVzdC5nZXRSZXNwb25zZShcImFzU3RyaW5nXCIpOyAgIC8vIFJlc3BvbnNlIGFzIHN0cmluZy5cbi8vICAgICAgICAgIG9yOiAgIHZhciByZXNwb25zZSA9IHJlcXVlc3QuZ2V0UmVzcG9uc2UoXCJhc1N0cmVhbVwiKTsgICAvLyBSZXNwb25zZSBhcyBzdHJlYW0uXG4vL1xuLy8gICAgICAgICAgICAgOC4gcmVxdWVzdC5kaXNjb25uZWN0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxlYXNlIGNvbm5lY3Rpb24uXG4vL1xuLy9cbi8vICAgICAgICAgIE5vdGU6IEJlIHN1cmUgdG8gYWRkIHRoZXNlIGxpbmVzIHRvIHRoZSB0b3Agb2YgeW91ciBzY3JpcHQ6XG4vL1xuLy8gICAgICAgICAgaW1wb3J0UGFja2FnZShqYXZhLnV0aWwpO1xuLy8gICAgICAgICAgaW1wb3J0UGFja2FnZShjb20uY2xvdXBpYS5saWIudXRpbCk7XG4vLyAgICAgICAgICBpbXBvcnRQYWNrYWdlKG9yZy5hcGFjaGUuY29tbW9ucy5odHRwY2xpZW50KTtcbi8vICAgICAgICAgIGltcG9ydFBhY2thZ2Uob3JnLmFwYWNoZS5jb21tb25zLmh0dHBjbGllbnQuY29va2llKTtcbi8vICAgICAgICAgIGltcG9ydFBhY2thZ2Uob3JnLmFwYWNoZS5jb21tb25zLmh0dHBjbGllbnQubWV0aG9kcyk7XG4vLyAgICAgICAgICBpbXBvcnRQYWNrYWdlKG9yZy5hcGFjaGUuY29tbW9ucy5odHRwY2xpZW50LmF1dGgpO1xuLy8gICAgICAgICAgaW1wb3J0UGFja2FnZShvcmcuYXBhY2hlLmNvbW1vbnMuaHR0cGNsaWVudC5wcm90b2NvbCk7XG4vLyAgICAgICAgICBpbXBvcnRDbGFzcyhvcmcuYXBhY2hlLmNvbW1vbnMuaHR0cGNsaWVudC5wcm90b2NvbC5TZWN1cmVQcm90b2NvbFNvY2tldEZhY3RvcnkpO1xuLy8gICAgICAgICAgaW1wb3J0UGFja2FnZShjb20uY2xvdXBpYS5saWIuY0lhYVMudmNkLmFwaSk7XG4vL1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbnZhciBodHRwUmVxdWVzdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5odHRwUmVxdWVzdC5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbihzZXJ2ZXJJcCwgdHJhbnNwb3J0LCB1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICB0aGlzLnNlcnZlcklwID0gc2VydmVySXA7XG4gICAgdGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7XG4gICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDtcblxuICAgIHRoaXMuaHR0cENsaWVudCA9IG5ldyBIdHRwQ2xpZW50KCk7XG5cbiAgICAvLyBEZWNpZGUgd2hldGhlciB0byBjcmVhdGUgYW4gSFRUUCBvciBIVFRQUyBjb25uZWN0aW9uIGJhc2VkIHVwIFwndHJhbnNwb3J0XCcuXG4gICAgaWYoIHRoaXMudHJhbnNwb3J0ID09IFwiaHR0cHNcIiApIHtcblx0XHR0aGlzLmh0dHBDbGllbnQgPSBDdXN0b21FYXN5U1NMU29ja2V0RmFjdG9yeS5nZXRJZ25vcmVTU0xDbGllbnQodGhpcy5zZXJ2ZXJJcCwgNDQzKTtcblxuICAgICAgICAvLyBTZXQgcHJveHkgY29uZmlndXJhdGlvbiBpZiBwcm94eSBpbmZvIGhhcyBiZWVuIHBhc3NlZCB0byB0aGUgdGFza1xuICAgICAgICBpZiAocHJveHlIb3N0KSB7XG4gICAgICAgICAgICBsb2dnZXIuYWRkSW5mbyhcIlByb3h5IGNvbmZpZ3VyYXRpb24gaGFzIGJlZW4gcGFzc2VkLCBhZGRpbmcgLSBcIitwcm94eUhvc3QrXCI6XCIrcHJveHlQb3J0KTtcbiAgICAgICAgICAgIHRoaXMuaHR0cENsaWVudC5nZXRIb3N0Q29uZmlndXJhdGlvbigpLnNldFByb3h5KHByb3h5SG9zdCwgcHJveHlQb3J0KTtcbiAgICAgICAgfVxuXG5cdFx0dGhpcy5odHRwQ2xpZW50LmdldFBhcmFtcygpLnNldENvb2tpZVBvbGljeShcImRlZmF1bHRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBIVFRQIGNvbm5lY3Rpb24uXG4gICAgICAgIHRoaXMuaHR0cENsaWVudC5nZXRIb3N0Q29uZmlndXJhdGlvbigpLnNldEhvc3QodGhpcy5zZXJ2ZXJJcCwgODAsIFwiaHR0cFwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmh0dHBDbGllbnQuZ2V0UGFyYW1zKCkuc2V0Q29va2llUG9saWN5KFwiZGVmYXVsdFwiKTtcblxuICAgIC8vIElmIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBzdXBwbGllZCwgdGhlbiB1c2UgYmFzaWNBdXRoLlxuICAgIGlmKCB0aGlzLnVzZXJuYW1lICYmIHRoaXMucGFzc3dvcmQgKSB7XG4gICAgICAgIHRoaXMuaHR0cENsaWVudC5nZXRQYXJhbXMoKS5zZXRBdXRoZW50aWNhdGlvblByZWVtcHRpdmUodHJ1ZSk7XG4gICAgICAgIHRoaXMuZGVmYXVsdGNyZWRzID0gbmV3IFVzZXJuYW1lUGFzc3dvcmRDcmVkZW50aWFscyh0aGlzLnVzZXJuYW1lLCB0aGlzLnBhc3N3b3JkKTtcbiAgICAgICAgdGhpcy5odHRwQ2xpZW50LmdldFN0YXRlKCkuc2V0Q3JlZGVudGlhbHMobmV3IEF1dGhTY29wZSh0aGlzLnNlcnZlcklwLCAtMSwgbnVsbCksIHRoaXMuZGVmYXVsdGNyZWRzKTtcbiAgICB9XG59O1xuXG5odHRwUmVxdWVzdC5wcm90b3R5cGUuY29udGVudFR5cGUgPSBmdW5jdGlvbihjb250ZW50VHlwZSkge1xuICAgIHRoaXMuY29udGVudFR5cGUgPSBjb250ZW50VHlwZTtcblxuICAgIHRoaXMuY29udGVudFR5cGVzID0gW1xuICAgICAgICBbXCJ4bWxcIixcImFwcGxpY2F0aW9uL3htbFwiXSxcbiAgICAgICAgW1wianNvblwiLFwiYXBwbGljYXRpb24vanNvblwiXVxuICAgIF07XG5cbiAgICBmb3IoIHRoaXMuaT0wOyB0aGlzLmk8dGhpcy5jb250ZW50VHlwZXMubGVuZ3RoOyB0aGlzLmkrKylcbiAgICAgICAgaWYodGhpcy5jb250ZW50VHlwZXNbdGhpcy5pXVswXSA9PSB0aGlzLmNvbnRlbnRUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLmh0dHBNZXRob2QuYWRkUmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCB0aGlzLmNvbnRlbnRUeXBlc1t0aGlzLmldWzFdKTtcbiAgICAgICAgICAgIHRoaXMuaHR0cE1ldGhvZC5hZGRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsIHRoaXMuY29udGVudFR5cGVzW3RoaXMuaV1bMV0pO1xuICAgICAgICB9XG59O1xuXG5odHRwUmVxdWVzdC5wcm90b3R5cGUuYWRkSGVhZGVyID0gZnVuY3Rpb24oaGVhZGVyTmFtZSxoZWFkZXJWYWx1ZSkge1xuICAgIHRoaXMuaGVhZGVyTmFtZSA9IGhlYWRlck5hbWU7XG4gICAgdGhpcy5oZWFkZXJWYWx1ZSA9IGhlYWRlclZhbHVlO1xuXG4gICAgdGhpcy5odHRwTWV0aG9kLmFkZFJlcXVlc3RIZWFkZXIodGhpcy5oZWFkZXJOYW1lLCB0aGlzLmhlYWRlclZhbHVlKTtcbn07XG5cbmh0dHBSZXF1ZXN0LnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gQ29ubmVjdGlvbjpjbG9zZSBpcyBoYXJkIGNvZGVkIGhlcmUgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhlIFRDUCBjb25uZWN0aW9uXG4gICAgLy8gZ2V0cyB0b3JuIGRvd24gaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIHJlcXVlc3QuIENvbW1lbnQgdGhpcyBsaW5lIG91dCBpZiB5b3Ugd2lzaCB0b1xuICAgIC8vIGV4cGVyaW1lbnQgd2l0aCBIVFRQIHBlcnNpc3RlbmNlLlxuICAgIHRoaXMuaHR0cE1ldGhvZC5hZGRSZXF1ZXN0SGVhZGVyKFwiQ29ubmVjdGlvblwiLCBcImNsb3NlXCIpO1xuXG4gICAgdGhpcy5odHRwQ2xpZW50LmV4ZWN1dGVNZXRob2QodGhpcy5odHRwTWV0aG9kKTtcblxuICAgIC8vIFJldHJpZXZlIHN0YXR1cyBjb2RlLlxuICAgIHRoaXMuc3RhdHVzQ29kZSA9IHRoaXMuaHR0cE1ldGhvZC5nZXRTdGF0dXNDb2RlKCk7XG5cbiAgICByZXR1cm4gdGhpcy5zdGF0dXNDb2RlO1xufVxuXG5odHRwUmVxdWVzdC5wcm90b3R5cGUuZ2V0UmVxdWVzdCA9IGZ1bmN0aW9uKHVyaSkge1xuICAgIHRoaXMudXJpID0gdXJpO1xuXG4gICAgLy8gR2V0IHJlcXVlc3QuXG4gICAgdGhpcy5odHRwTWV0aG9kID0gbmV3IEdldE1ldGhvZCh0aGlzLnVyaSk7XG59O1xuXG5odHRwUmVxdWVzdC5wcm90b3R5cGUucG9zdFJlcXVlc3QgPSBmdW5jdGlvbih1cmksYm9keXRleHQpIHtcbiAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICB0aGlzLmJvZHl0ZXh0ID0gYm9keXRleHQ7XG5cbiAgICAvLyBQT1NUIFJlcXVlc3QuXG4gICAgdGhpcy5odHRwTWV0aG9kID0gbmV3IFBvc3RNZXRob2QodGhpcy51cmkpO1xuICAgIHRoaXMuaHR0cE1ldGhvZC5zZXRSZXF1ZXN0RW50aXR5KG5ldyBTdHJpbmdSZXF1ZXN0RW50aXR5KHRoaXMuYm9keXRleHQpKTtcbn07XG5cbmh0dHBSZXF1ZXN0LnByb3RvdHlwZS5nZXRSZXNwb25zZSA9IGZ1bmN0aW9uKGFzVHlwZSkge1xuICAgIHRoaXMuYXNUeXBlID0gYXNUeXBlO1xuXG4gICAgaWYoIHRoaXMuYXNUeXBlID09IFwiYXNTdHJlYW1cIiApXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBNZXRob2QuZ2V0UmVzcG9uc2VCb2R5QXNTdHJlYW0oKTtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBNZXRob2QuZ2V0UmVzcG9uc2VCb2R5QXNTdHJpbmcoKTtcbn07XG5cbmh0dHBSZXF1ZXN0LnByb3RvdHlwZS5kZWxldGVSZXF1ZXN0ID0gZnVuY3Rpb24odXJpKSB7XG4gICAgdGhpcy51cmkgPSB1cmk7XG5cbiAgICAvLyBHZXQgcmVxdWVzdC5cbiAgICB0aGlzLmh0dHBNZXRob2QgPSBuZXcgRGVsZXRlTWV0aG9kKHRoaXMudXJpKTtcbn07XG5cbmh0dHBSZXF1ZXN0LnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gUmVsZWFzZSBjb25uZWN0aW9uLlxuICAgIHRoaXMuaHR0cE1ldGhvZC5yZWxlYXNlQ29ubmVjdGlvbigpO1xufTtcblxuXG5cbmZ1bmN0aW9uIHN0YXR1c0NoZWNrKHN0YXR1c0NvZGUpIHtcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEF1dGhvcjogICAgICBSb2IgRWR3YXJkcyAoQGNsaWpvY2tleS9yb2JlZHdhQGNpc2NvLmNvbSlcbiAgLy8gRGVzY3JpcHRpb246IENoZWNrIHRoZSBzdGF0dXMgY29kZSBhZnRlciBTcGFyayBBUEkgY2FsbFxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBpZiAoKHN0YXR1c0NvZGUgPT0gMjAwKSB8fCAoc3RhdHVzQ29kZSA9PSAyMDQpKSB7XG4gICAgICBsb2dnZXIuYWRkSW5mbyhcIkFsbCBsb29rcyBnb29kLiBIVFRQIHJlc3BvbnNlIGNvZGU6IFwiK3N0YXR1c0NvZGUpO1xuICAgICAgcmV0dXJuXG4gIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PSA0MDApIHtcbiAgICAgICAgbG9nZ2VyLmFkZEVycm9yKFwiRmFpbGVkIHRvIGNvbmZpZ3VyZSBTcGFyay4gSFRUUCByZXNwb25zZSBjb2RlOiBcIitzdGF0dXNDb2RlKTtcbiAgICAgICAgbG9nZ2VyLmFkZEluZm8oXCJSZXR1cm4gY29kZSBcIitzdGF0dXNDb2RlK1wiOiBUaGUgcmVxdWVzdCB3YXMgaW52YWxpZCBvciBjYW5ub3QgYmUgb3RoZXJ3aXNlIHNlcnZlZC4gQW4gYWNjb21wYW55aW5nIGVycm9yIG1lc3NhZ2Ugd2lsbCBleHBsYWluIGZ1cnRoZXIuXCIpO1xuICAgICAgICBsb2dnZXIuYWRkRXJyb3IoXCJSZXNwb25zZSByZWNlaXZlZDogXCIrcmVxdWVzdC5nZXRSZXNwb25zZShcImFzU3RyaW5nXCIpKTtcbiAgICAgICAgLy8gU2V0IHRoaXMgdGFzayBhcyBmYWlsZWQuXG4gICAgICAgIGN0eHQuc2V0RmFpbGVkKFwiUmVxdWVzdCBmYWlsZWQuXCIpO1xuICB9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT0gNDAxKSB7XG4gICAgICBsb2dnZXIuYWRkRXJyb3IoXCJGYWlsZWQgdG8gY29uZmlndXJlIFNwYXJrLiBIVFRQIHJlc3BvbnNlIGNvZGU6IFwiK3N0YXR1c0NvZGUpO1xuICAgICAgbG9nZ2VyLmFkZEluZm8oXCJSZXR1cm4gY29kZSBcIitzdGF0dXNDb2RlK1wiOiBBdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyB3ZXJlIG1pc3Npbmcgb3IgaW5jb3JyZWN0LlwiKTtcbiAgICAgIGxvZ2dlci5hZGRFcm9yKFwiUmVzcG9uc2UgcmVjZWl2ZWQ6IFwiK3JlcXVlc3QuZ2V0UmVzcG9uc2UoXCJhc1N0cmluZ1wiKSk7XG4gICAgICAvLyBTZXQgdGhpcyB0YXNrIGFzIGZhaWxlZC5cbiAgICAgIGN0eHQuc2V0RmFpbGVkKFwiUmVxdWVzdCBmYWlsZWQuXCIpO1xuICB9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT0gNDAzKSB7XG4gICAgICBsb2dnZXIuYWRkRXJyb3IoXCJGYWlsZWQgdG8gY29uZmlndXJlIFNwYXJrLiBIVFRQIHJlc3BvbnNlIGNvZGU6IFwiK3N0YXR1c0NvZGUpO1xuICAgICAgbG9nZ2VyLmFkZEluZm8oXCJSZXR1cm4gY29kZSBcIitzdGF0dXNDb2RlK1wiOiBUaGUgcmVxdWVzdCBpcyB1bmRlcnN0b29kLCBidXQgaXQgaGFzIGJlZW4gcmVmdXNlZCBvciBhY2Nlc3MgaXMgbm90IGFsbG93ZWQuXCIpO1xuICAgICAgbG9nZ2VyLmFkZEVycm9yKFwiUmVzcG9uc2UgcmVjZWl2ZWQ6IFwiK3JlcXVlc3QuZ2V0UmVzcG9uc2UoXCJhc1N0cmluZ1wiKSk7XG4gICAgICAvLyBTZXQgdGhpcyB0YXNrIGFzIGZhaWxlZC5cbiAgICAgIGN0eHQuc2V0RmFpbGVkKFwiUmVxdWVzdCBmYWlsZWQuXCIpO1xuICB9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT0gNDA0KSB7XG4gICAgICBsb2dnZXIuYWRkRXJyb3IoXCJGYWlsZWQgdG8gY29uZmlndXJlIFNwYXJrLiBIVFRQIHJlc3BvbnNlIGNvZGU6IFwiK3N0YXR1c0NvZGUpO1xuICAgICAgbG9nZ2VyLmFkZEluZm8oXCJSZXR1cm4gY29kZSBcIitzdGF0dXNDb2RlK1wiOiBUaGUgVVJJIHJlcXVlc3RlZCBpcyBpbnZhbGlkIG9yIHRoZSByZXNvdXJjZSByZXF1ZXN0ZWQsIHN1Y2ggYXMgYSB1c2VyLCBkb2VzIG5vdCBleGlzdC4gQWxzbyByZXR1cm5lZCB3aGVuIHRoZSByZXF1ZXN0ZWQgZm9ybWF0IGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIHJlcXVlc3RlZCBtZXRob2QuXCIpO1xuICAgICAgbG9nZ2VyLmFkZEVycm9yKFwiUmVzcG9uc2UgcmVjZWl2ZWQ6IFwiK3JlcXVlc3QuZ2V0UmVzcG9uc2UoXCJhc1N0cmluZ1wiKSk7XG4gICAgICAvLyBTZXQgdGhpcyB0YXNrIGFzIGZhaWxlZC5cbiAgICAgIGN0eHQuc2V0RmFpbGVkKFwiUmVxdWVzdCBmYWlsZWQuXCIpO1xuICB9IGVsc2UgaWYgKHN0YXR1c0NvZGUgPT0gNDA5KSB7XG4gICAgICBsb2dnZXIuYWRkV2FybihcIkZhaWxlZCB0byBjb25maWd1cmUgU3BhcmsuIEhUVFAgcmVzcG9uc2UgY29kZTogXCIrc3RhdHVzQ29kZSk7XG4gICAgICBsb2dnZXIuYWRkSW5mbyhcIlJldHVybiBjb2RlIFwiK3N0YXR1c0NvZGUrXCI6IFRoZSByZXF1ZXN0IGNvdWxkIG5vdCBiZSBwcm9jZXNzZWQgYmVjYXVzZSBpdCBjb25mbGljdHMgd2l0aCBzb21lIGVzdGFibGlzaGVkIHJ1bGUgb2YgdGhlIHN5c3RlbS4gRm9yIGV4YW1wbGUsIGEgcGVyc29uIG1heSBub3QgYmUgYWRkZWQgdG8gYSByb29tIG1vcmUgdGhhbiBvbmNlLlwiKTtcbiAgICAgIGxvZ2dlci5hZGRFcnJvcihcIlJlc3BvbnNlIHJlY2VpdmVkOiBcIityZXF1ZXN0LmdldFJlc3BvbnNlKFwiYXNTdHJpbmdcIikpO1xuICAgICAgLy8gU2V0IHRoaXMgdGFzayBhcyBmYWlsZWQuXG4gICAgICBjdHh0LnNldEZhaWxlZChcIlJlcXVlc3QgZmFpbGVkLlwiKTtcbiAgfSBlbHNlIGlmIChzdGF0dXNDb2RlID09IDUwMCkge1xuICAgICAgbG9nZ2VyLmFkZEVycm9yKFwiRmFpbGVkIHRvIGNvbmZpZ3VyZSBTcGFyay4gSFRUUCByZXNwb25zZSBjb2RlOiBcIitzdGF0dXNDb2RlKTtcbiAgICAgIGxvZ2dlci5hZGRJbmZvKFwiUmV0dXJuIGNvZGUgXCIrc3RhdHVzQ29kZStcIjogU29tZXRoaW5nIHdlbnQgd3Jvbmcgb24gdGhlIHNlcnZlci5cIik7XG4gICAgICBsb2dnZXIuYWRkRXJyb3IoXCJSZXNwb25zZSByZWNlaXZlZDogXCIrcmVxdWVzdC5nZXRSZXNwb25zZShcImFzU3RyaW5nXCIpKTtcbiAgICAgIC8vIFNldCB0aGlzIHRhc2sgYXMgZmFpbGVkLlxuICAgICAgY3R4dC5zZXRGYWlsZWQoXCJSZXF1ZXN0IGZhaWxlZC5cIik7XG4gIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PSA1MDEpIHtcbiAgICAgIGxvZ2dlci5hZGRFcnJvcihcIkZhaWxlZCB0byBjb25maWd1cmUgU3BhcmsuIEhUVFAgcmVzcG9uc2UgY29kZTogXCIrc3RhdHVzQ29kZSk7XG4gICAgICBsb2dnZXIuYWRkSW5mbyhcIlJldHVybiBjb2RlIFwiK3N0YXR1c0NvZGUrXCI6IFNlcnZlciBpcyBvdmVybG9hZGVkIHdpdGggcmVxdWVzdHMuIFRyeSBhZ2FpbiBsYXRlci5cIik7XG4gICAgICBsb2dnZXIuYWRkRXJyb3IoXCJSZXNwb25zZSByZWNlaXZlZDogXCIrcmVxdWVzdC5nZXRSZXNwb25zZShcImFzU3RyaW5nXCIpKTtcbiAgICAgIC8vIFNldCB0aGlzIHRhc2sgYXMgZmFpbGVkLlxuICAgICAgY3R4dC5zZXRGYWlsZWQoXCJSZXF1ZXN0IGZhaWxlZC5cIik7XG4gIH0gZWxzZSB7XG4gICAgICBsb2dnZXIuYWRkRXJyb3IoXCJBbiB1bmtub3duIHJlc3BvbnNlIGNvZGUgaGFzIG9jY3VyZWQgdGhlcmVmb3JlIGV4aXRpbmc6IFwiK3N0YXR1c0NvZGUpO1xuICAgICAgY3R4dC5zZXRGYWlsZWQoXCJSZXF1ZXN0IGZhaWxlZC5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2xlYW4ocmVzcG9uc2UsIHRvQ2xlYW4pIHtcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEF1dGhvcjogICAgICBSb2IgRWR3YXJkcyAoQGNsaWpvY2tleS9yb2JlZHdhQGNpc2NvLmNvbSlcbiAgLy8gRGVzY3JpcHRpb246IENsZWFuIHVwIHRoZSByZXNwb25zZSBieSBzdHJpcHBpbmcgb3V0IHRoZSBleHRyYSBcIlwiXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIHRoaXMudG9DbGVhbiA9IHRvQ2xlYW47XG5cbiAgbG9nZ2VyLmFkZEluZm8oXCJSdW5uaW5nIHRocm91Z2ggYSBjbGVhbiB1cCB0byBvbnRhaW4gdGhlIFwiK3RvQ2xlYW4rXCIgdmFsdWUuXCIpO1xuICB0aGlzLmNsZWFuZWQgPSBuZXcgU3RyaW5nKCk7XG4gIHRoaXMuY2xlYW5lZCA9IEpTT04uZ2V0SnNvbkVsZW1lbnQodGhpcy5yZXNwb25zZSwgdGhpcy50b0NsZWFuKS50b1N0cmluZygpLnJlcGxhY2UoL1wiL2csIFwiXCIpO1xuICBsb2dnZXIuYWRkSW5mbyhcIlZhbHVlIGNsZWFuZWQgdXAsIHJldHVybmluZyA6XCIrdGhpcy5jbGVhbmVkKTtcbiAgcmV0dXJuIHRoaXMuY2xlYW5lZDtcbn1cblxuZnVuY3Rpb24gZ2V0Um9vbUlkRnJvbU5hbWUodG9rZW4sIHJvb21JZCkge1xuICAgIHRoaXMuZGVzdGluYXRpb24gPSBcImFwaS5jaXNjb3NwYXJrLmNvbVwiO1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICB0aGlzLnJvb21JZCA9IHJvb21JZDtcbiAgICBcbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBodHRwUmVxdWVzdCgpO1xuICAgIHJlcXVlc3Quc2V0dXAodGhpcy5kZXN0aW5hdGlvbixcImh0dHBzXCIpO1xuICAgIHJlcXVlc3QuZ2V0UmVxdWVzdChcJy92MS9yb29tc1wnKTtcbiAgICByZXF1ZXN0LmNvbnRlbnRUeXBlKFwianNvblwiKTtcbiAgICByZXF1ZXN0LmFkZEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCZWFyZXIgXCIgKyB0aGlzLnRva2VuKTtcblxuICAgIHZhciBzdGF0dXNDb2RlID0gcmVxdWVzdC5leGVjdXRlKCk7XG4gICAgc3RhdHVzQ2hlY2soc3RhdHVzQ29kZSk7XG5cbiAgICB0aGlzLnZhbHVlID0gcmVxdWVzdC5nZXRSZXNwb25zZShcImFzU3RyaW5nXCIpO1xuICAgIGxvZ2dlci5hZGRJbmZvKFwiUmF3IHJldHVybmVkIHZhdWxlczogXCIgK3ZhbHVlKTtcblxuICAgIHZhciBzcGFya3Jvb21pZCA9IFwibm9uZVwiO1xuICAgIHZhciBzcGFya3Jvb210aXRsZSA9IFwibm9uZVwiO1xuICAgIHZhciBkYXRhID0gSlNPTi5nZXRKc29uRWxlbWVudCh2YWx1ZSwgbnVsbCk7XG4gICAgdmFyIGpzb25EYXRhID0gSlNPTi5nZXRKc29uRWxlbWVudChkYXRhLCBcIml0ZW1zXCIpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBqc29uRGF0YS5zaXplKCk7IGkrKykge1xuICAgICAgICBcbiAgICAgICAgaWYgKEpTT04uZ2V0SnNvbkVsZW1lbnQoanNvbkRhdGEuZ2V0KGkpLCBcInRpdGxlXCIpLnRvU3RyaW5nKCkucmVwbGFjZSgvXCIvZywgXCJcIikgPT0gdGhpcy5yb29tSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5hZGRJbmZvKFwiU3BhcmsgUm9vbTogICAgICBcIiArIHRoaXMucm9vbUlkICsgXCIgRm91bmQhXCIgKTtcbiAgICAgICAgICAgIHNwYXJrcm9vbXRpdGxlID0gSlNPTi5nZXRKc29uRWxlbWVudChqc29uRGF0YS5nZXQoaSksIFwidGl0bGVcIikudG9TdHJpbmcoKS5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcbiAgICAgICAgICAgIHNwYXJrcm9vbWlkID0gSlNPTi5nZXRKc29uRWxlbWVudChqc29uRGF0YS5nZXQoaSksIFwiaWRcIikudG9TdHJpbmcoKS5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcbiAgICAgICAgICAgIGxvZ2dlci5hZGRJbmZvKFwiU3BhcmsgUm9vbSBJZDogICBcIitzcGFya3Jvb21pZCk7XG4gICAgICAgICAgICBsb2dnZXIuYWRkSW5mbyhcIlNwYXJrIFJvb20gTmFtZTogXCIrc3Bhcmtyb29tdGl0bGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXF1ZXN0LmRpc2Nvbm5lY3QoKTtcbiAgICBsb2dnZXIuYWRkSW5mbyhcIlJldHVybmluZyB0aGlzIFNwYXJrIFJvb20gSWQ6ICAgXCIrc3Bhcmtyb29taWQpO1xuICAgIHJldHVybiBzcGFya3Jvb21pZDtcbiAgICAvL3JldHVybiBcIlkybHpZMjl6Y0dGeWF6b3ZMM1Z6TDFKUFQwMHZZMlF5WkRZMVlUQXROekl6WmkweE1XVTNMVGhsWWpZdFkyWXlNamhpWkdZNU9UUm1cIjtcbn1cbmZ1bmN0aW9uIG1lc3NhZ2VQb3N0KHRva2VuLHJvb21JZCxtZXNzYWdlLGZpbGUpIHtcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEF1dGhvcjogICAgICBSb2IgRWR3YXJkcyAoQGNsaWpvY2tleS9yb2JlZHdhQGNpc2NvLmNvbSlcbiAgLy8gRGVzY3JpcHRpb246IFBvc3QgYSBtZXNzYWdlIGludG8gYSBTcGFyayBSb29tXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHRoaXMuZGVzdGluYXRpb24gPSBcImFwaS5jaXNjb3NwYXJrLmNvbVwiO1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICB0aGlzLnJvb21JZCA9IHJvb21JZDtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMuZmlsZSA9IGZpbGU7XG5cbiAgICAvLyBDb25zdHJ1Y3QgSlNPTjpcbiAgICB2YXIgYm9keSA9IG5ldyBIYXNoTWFwKCk7XG4gICAgYm9keS5wdXQoXCJyb29tSWRcIiwgcm9vbUlkKTtcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgd2lsbCBiZSBwb3N0aW5nIGEgbWVzc2FnZSBhbmQvb3IgZmlsZSB0byB0aGUgcm9vbVxuICAgIGlmICghbWVzc2FnZS5lcXVhbHMoXCJcIikpIHtcbiAgICAgIGJvZHkucHV0KFwidGV4dFwiLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgaWYgKCFmaWxlLmVxdWFscyhcIlwiKSkge1xuICAgICAgYm9keS5wdXQoXCJmaWxlXCIsIGZpbGUpO1xuICAgIH1cbiAgICB2YXIganNvbkJvZHkgPSBKU09OLmphdmFUb0pzb25TdHJpbmcoYm9keSwgYm9keS5nZXRDbGFzcygpKTtcbiAgICBsb2dnZXIuYWRkSW5mbyhcIlNlbmRpbmcgSlNPTjogXCIgKyBqc29uQm9keSk7XG5cbiAgICAvLyBNYWtlIFJlc3QgY2FsbFxuICAgIHZhciByZXF1ZXN0ID0gbmV3IGh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5zZXR1cCh0aGlzLmRlc3RpbmF0aW9uLFwiaHR0cHNcIik7XG4gICAgcmVxdWVzdC5wb3N0UmVxdWVzdChcJy92MS9tZXNzYWdlc1wnLCBqc29uQm9keSk7XG4gICAgcmVxdWVzdC5jb250ZW50VHlwZShcImpzb25cIik7XG4gICAgcmVxdWVzdC5hZGRIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgdmFyIHN0YXR1c0NvZGUgPSByZXF1ZXN0LmV4ZWN1dGUoKTtcbiAgICBzdGF0dXNDaGVjayhzdGF0dXNDb2RlKTtcblxuICAgIHRoaXMudmFsdWUgPSByZXF1ZXN0LmdldFJlc3BvbnNlKFwiYXNTdHJpbmdcIik7XG4gICAgbG9nZ2VyLmFkZEluZm8oXCJSYXcgcmV0dXJuZWQgdmF1bGVzOiBcIit0aGlzLnZhbHVlKTtcblxuICAgIHRoaXMubWVzc2FnZUlkID0gY2xlYW4odmFsdWUsIFwiaWRcIik7XG5cbiAgICByZXF1ZXN0LmRpc2Nvbm5lY3QoKTtcbiAgICByZXR1cm4gW21lc3NhZ2VJZF07XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyVW5kb1Rhc2sodG9rZW4sbWVzc2FnZUlkKSB7XG4gICAgLy8gcmVnaXN0ZXIgdW5kbyB0YXNrXG4gICAgdmFyIHVuZG9IYW5kbGVyID0gXCJjdXN0b21fU3BhcmtfbWVzc2FnZXNfZGVsZXRlXCI7XG4gICAgdmFyIHVuZG9Db250ZXh0ID0gY3R4dC5jcmVhdGVJbm5lclRhc2tDb250ZXh0KHVuZG9IYW5kbGVyKTtcbiAgICB2YXIgdW5kb0NvbmZpZyA9IHVuZG9Db250ZXh0LmdldENvbmZpZ09iamVjdCgpO1xuXG4gICAgLy8gVGhlc2UgYXJlIHRoZSB2YXJpYWJsZXMgdGhhdCB0aGUgcm9sbGJhY2sgd2YgdGFzayBnZXRzIGNhbGxlZCB3aXRoLlxuICAgIHVuZG9Db25maWcudG9rZW4gPSB0b2tlbjtcbiAgICB1bmRvQ29uZmlnLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZDtcbiAgICB1bmRvQ29uZmlnLnByb3h5SG9zdCA9IHByb3h5SG9zdDtcbiAgICB1bmRvQ29uZmlnLnByb3h5UG9ydCA9IHByb3h5UG9ydDtcblxuICAgIGN0eHQuZ2V0Q2hhbmdlVHJhY2tlcigpLnVuZG9hYmxlUmVzb3VyY2VNb2RpZmllZChcIlJvbGxiYWNrIHBvc3QgbWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgIFwiXCIsXCJyb2xsYmFjayBcIixcbiAgICAgICAgICAgICAgICBcIlJvbGxiYWNrIFwiK21lc3NhZ2VJZCtcIi5cIix1bmRvSGFuZGxlcix1bmRvQ29uZmlnKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vIG1haW4oKTtcblxuLy8gV29ya2Zsb3cgSW5wdXRzLlxudmFyIHRva2VuID0gaW5wdXQudG9rZW47XG52YXIgbWVzc2FnZSA9IGlucHV0Lm1lc3NhZ2U7XG52YXIgZmlsZSA9IGlucHV0LmZpbGU7XG52YXIgcm9vbUlkID0gaW5wdXQucm9vbUlkO1xudmFyIHByb3h5SG9zdCA9IGlucHV0LnByb3h5SG9zdDtcbnZhciBwcm94eVBvcnQgPSBpbnB1dC5wcm94eVBvcnQ7XG5cblxudmFyIHNwYXJrUm9vbUlkID0gZ2V0Um9vbUlkRnJvbU5hbWUodG9rZW4sIHJvb21JZCk7XG5cbmlmIChzcGFya1Jvb21JZCA9PSBcIm5vbmVcIikge1xuICAgIGxvZ2dlci5hZGRJbmZvKFwiUm9vbSBub3QgZm91bmQgLSByb29tOiBcIityb29tSWQrIFwiIHdhcyBub3QgZm91bmRcIik7XG4gICAgLy8gU2V0IHRoaXMgdGFzayBhcyBmYWlsZWQuXG4gICAgY3R4dC5zZXRGYWlsZWQoXCJSZXF1ZXN0IGZhaWxlZC5cIik7XG59IGVsc2Uge1xuXG4gICAgdmFyIHJlc3VsdCA9IG1lc3NhZ2VQb3N0KHRva2VuLHNwYXJrUm9vbUlkLG1lc3NhZ2UsZmlsZSk7XG4gICAgbG9nZ2VyLmFkZEluZm8oXCJSZXN1bHQ6IFwiK3Jlc3VsdCk7XG5cbiAgICBpZiAocmVzdWx0KVxuICAgICAgICBsb2dnZXIuYWRkSW5mbyhcIlN1Y2Nlc3NmdWxseSBwb3N0ZWQgbWVzc2FnZVwiKTtcbiAgICAgICAgb3V0cHV0Lm1lc3NhZ2VJZCA9IHJlc3VsdFswXTtcbn1cblxuLy8gUmVnaXN0ZXIgcm9sbGJhY2sgdGFzaywgdGhpcyBpcyBhbiBvcHRpb25hbCBzZXR0aW5nLlxuaWYgKGlucHV0LnJvbGxiYWNrID09IDEpIHtcbiAgICByZWdpc3RlclVuZG9UYXNrKHRva2VuLHJlc3VsdFswXSk7XG4gICAgbG9nZ2VyLmFkZEluZm8oXCJUaGUgcm9sbGJhY2sgb3B0aW9uIGhhcyBiZWVuIGVuYWJsZWQsIHlvdSB3aWxsIGJlIGFibGUgdG8gcm9sbGJhY2sgdG8gcG90aW5nIG9mIHRoZSBtZXNzYWdlLlwiKTtcbn0gZWxzZSB7XG4gICAgbG9nZ2VyLmFkZEluZm8oXCJZb3Ugd2lsbCBub3QgYmUgYWJsZSB0byByb2xsYmFjayB0aGUgcG9zdCBtZXNzYWdlIHRhc2sgZHVlIHRvIFwnbm8gcm9sbGJhY2tcJyBiZWluZyBzZWxlY3RlZC5cIik7XG59XG4iLCJjb250cm9sbGVySW1wbCI6eyJsaXN0IjpbXSwibW9UeXBlTmFtZSI6ImNvbS5jbG91cGlhLmxpYi5jTWFjcm9VSS5NYWNyb0NvbnRyb2xsZXJTY3JpcHQiLCJ2YWxpZGF0b3JOYW1lIjpudWxsfX0="}]]></data></featureAssetEntry><type>CUSTOM_TASKS</type></UnifiedFeatureAssetInfo><version>3.0</version></OrchExportInfo>